#+STARTUP: hidestars 
#+TITLE: D-Hadronic Meetings

* 2010

** 2010-12-21
   :PROPERTIES:
   :CUSTOM_ID: 20101221
   :END:

   - Progress on Background Shape Systematics

     1. Use the same lineshape functioin to fit sidebands: 
        | Delta E sideband low  | [[./10.1/fig/data_single_818ipbv7_desideband_low.org][figure]] |
        | Detla E sideband high | [[./10.1/fig/data_single_818ipbv7_desideband_high.org][figure]] |

	*Notice*: for mode Kpi in the above fitting, the argus slope
	parameter ("xi") has changed the upper limit from -0.1
	to 10. The fitting result are still very close to the limit,
	although there was no complain in the log file.
 
	Then use the ARGUS parameters to fit signal region:

        | ARGUS para low  | [[./10.1/fig/data_single_818ipbv7_argus_low.org][figure]] |
        | ARGUS para high | [[./10.1/fig/data_single_818ipbv7_argus_high.org][figure]] | 

	[[./log/2010/1221/arg.png]]

	Compare with last week:

	[[./log/2010/1214/arg.png]]

     2. Delta E distribution for all modes: [[./10.1/fig/var_deltae_data_diagsingle_818ipbv7.org][figure]]  

     3. Compare with previous uncertainties:

        | Mode     | 281/pb | 818/pb |
        |----------+--------+--------|
        | Kpi      |    0.4 |   0.59 |
        | Kpipi0   |    1.0 |   1.05 |
        | Kpipipi  |    0.4 |   0.64 |
        | Kpipi    |    0.4 |   0.41 |
        | Kpipipi0 |    1.5 |   3.32 |
        | Kspi     |    0.4 |   0.91 |
        | Kspipi0  |    1.0 |   1.48 |
        | Kspipipi |    1.0 |   1.26 |
        | KKpi     |    1.0 |   0.80 |

     4. Try to fix Kpipipi0 mode:

	Fix the signal yields to be 1, fitting status OK. 
	
        | Delta E sideband low +--> fix N1, N2  | [[./10.1/fig/data_Single_Dp_to_Kpipipi0_818ipbv7_desideband_low_fix_n1n2.org][figure]] |
        | Delta E sideband high +--> fix N1, N2 | [[./10.1/fig/data_Single_Dp_to_Kpipipi0_818ipbv7_desideband_high_fix_n1n2.org][figure]] |
        | ARGUS para low  +--> fix N1, N2       | [[./10.1/fig/data_Single_Dp_to_Kpipipi0_818ipbv7_argus_low_fix_n1n2.org][figure]] |
        | ARGUS para high +--> fix N1, N2       | [[./10.1/fig/data_Single_Dp_to_Kpipipi0_818ipbv7_argus_high_fix_n1n2.org][figure]] |
     
	Compare the yields with the standard, still 3.9% difference. 

	

** 2010-12-14
   :PROPERTIES:
   :CUSTOM_ID: 20101214
   :END:

   - Progress on Background Shape Systematics
     1. Selected Delta E sidebands
     2. Fit with ARGUS function
	
	Fitting plots:

       | Delta E sideband low  | [[./10.1/fig/data_single_818ipbv7_desideband_low.org][figure]] |
       | Detla E sideband high | [[./10.1/fig/data_single_818ipbv7_desideband_high.org][figure]] |
	
	Parameters:
	
        | ARGUS parameter slope  | [[./10.1/tab/para_argus_slope_818ipbv7_desidebands.org][table]] ([[./10.1/tab/para_argus_slope_818ipbv7_desidebands.info][info]]) |
        | ARGUS parameeter power | [[./10.1/tab/para_argus_power_818ipbv7_desidebands.org][table]] ([[./10.1/tab/para_argus_power_818ipbv7_desidebands.info][info]]) |

     3. Difference with standard yields
        | ARGUS para low  | [[./10.1/fig/data_single_818ipbv7_argus_low.org][figure]] |
        | ARGUS para high | [[./10.1/fig/data_single_818ipbv7_argus_high.org][figure]] |

	[[./log/2010/1214/arg.png]]

    Todo: Re-evaluating the sidebands. 
	
    DeltaE vs. mBC plot, see the correlation

    Try to use the lineshape to fit. 


** 2010-12-07
   :PROPERTIES:
   :CUSTOM_ID: 20101207
   :END:

   - Checked the trigger bit meaning:

     TriggerL1Data.h: v1.8: kElTrack = 0x10000, 
                      v1.10: kElTrack = 0x054002.

     May be the reason for the old/new MC difference. 

     Todo: send email to Mats Selen. 


   - Working on update the background shape:

     We estimate the uncertainty in ST yields due to the background
     shape by repeating the ST fits with alternative background shape
     parameters. These alternative parameters are determined from the
     M_{BC} distributions of events in high and low \Delta E sidebands. For
     each mode, we fit each sideband with an ARGUS function to
     determine shape parameters and then repeat the ST yield fits with
     the ARGUS parameters fixed to these values. The resulting shifts
     in the ST yields are used to set the value of the systematic for
     each mode.





** 2010-11-30
   :PROPERTIES:
   :CUSTOM_ID: 20101130
   :END:

   - CU Group Meeting Talk - December 2010 ([[./doc/cug201012/xshi-cug-20101216.pdf][PDF]])
     
     Comments:
     - p1: on -> at
     
     - p4: Check CLEO-c parameters with Steve Gray

     - p9: Point the Argus Background, ISR -> long tail effect in the plot

     - p10: Point the square-root scale for better signal/background
       display and same error bars every where. 

     - p15: a. reproducing the 281/pb result is non-trivial
       b. the 818/pb result is consistant with 281/pb, small
       errors. 

     - Overall: show plots of 818/pb analysis. 



** 2010-11-23
   :PROPERTIES:
   :CUSTOM_ID: 20101123
   :END:

   1. Double DSCD interference 

      [[./log/2010/1123/dcsd-1.png]]

      [[./log/2010/1123/dcsd-2.png]]

      [[./log/2010/1123/dcsd-refs.png]]

   2. Detector simulation - \pi^0 efficiency
      
      - Understand the two peaks in  D0 \to K\pi\pi^0 [[./10.1/fig/var_pi0_momentum_data_Single_D0_to_Kpipi0_818ipbv7.org][figure]] :
	
        About 70% decay mode is : D^0 \to K^{-} \rho^{+}, \rho^{+} \to \pi^{+} \pi^{0}. The
        typical momentum of the particles involved in this decay:
	
	p(D0) = 250 MeV,
	p(K-) = 700 MeV,
	p(rho) = | p(D0) - p(K-) | = 450 MeV
	
	So, p(pi) = 450-250 = 200 MeV, or 450+250 = 700 MeV. 
	
	Thus, we observe two peaks around 0.2GeV and 0.7 GeV.

     - Calcuate the pi0 efficiency corrections

	[[./log/2010/1123/pi0eff-1.png]]

	[[./log/2010/1123/pi0eff-2.png]]

   3. Trigger simulation

      Previously we assign 0.2% and 0.1% to the highlited modes:
      
      [[./log/2010/1116/trig0.png]]


      Used the two trigger bits:
      
      bit 16: electron+track line in l1trig.
      bit 2: two track in l1trig2.
      
      Still get 100% for all modes. 
      [[./log/2010/1116/trig.png]]
      
      Calcuated the same efficiency for the old 281/pb signal MC:
      
      | Mode          | Trigger efficiency (%) |
      |---------------+------------------------|
      | D0_to_Kpi      | 99.99 +/- 0.00         |
      | D0_to_Kpipi0   | 100 - 0.00             |
      | D0_to_Kpipipi  | 99.50 +/- 0.03         |
      | Dp_to_Kpipi    | 99.48 +/- 0.03         |
      | Dp_to_Kpipipi0 | 99.72 +/- 0.03         |
      | Dp_to_Kspi     | 99.73 +/- 0.02         |
      | Dp_to_Kspipi0  | 99.40 +/- 0.04         |
      | Dp_to_Kspipipi | 99.32 +/- 0.04         |
      | Dp_to_KKpi     | 98.92 +/- 0.08         | 

      Not sure why the efficiencies are lower than before. 
     

      Todo:
      1. Think about the process of rho decay
      2. Put the equation in the pi0 efficiency study
      3. Check the trigger bit meaning in the old and new signal MC

	 
	


** 2010-11-16
   :PROPERTIES:
   :CUSTOM_ID: 20101116
   :END:

   - Progress on the systematics

     1. Detector simulation - \pi^0 efficiency

        \pi^0 momentum distribution for 818/pb data:   
        | D0 \to K\pi\pi^0  | [[./10.1/fig/var_pi0_momentum_data_Single_D0_to_Kpipi0_818ipbv7.org][figure]] |
        | Dp \to K\pi\pi\pi^0 | [[./10.1/fig/var_pi0_momentum_data_Single_Dp_to_Kpipipi0_818ipbv7.org][figure]] |
        | Dp \to Ks\pi\pi^0 | [[./10.1/fig/var_pi0_momentum_data_Single_Dp_to_Kspipi0_818ipbv7.org][figure]] |
 
	How to assign the uncertainty? 

	Todo: think about the two peaks in the Kpipi0. 

        Weight the events for pi0 eff syst.  


     2. Trigger simulation
	
	Previously we assign 0.2% and 0.1% to the highlited modes:

	[[./log/2010/1116/trig0.png]]

	Now, redo the simulation for 818/pb signal MC: 

	100% efficiency for all modes:

	[[./log/2010/1116/trig.png]]
         
	No need to assign uncertainty.

	Todo: need to use two tracks bit. 

	bit 16: electron+track line in l1trig.
	bit 2: two track in l1trig2.


     3. Detla E requirement

	Previously, we assign 1.0% for the diagonal double tags, and
	$\sqrt{2}\cdot$ 0.5% for all other double tags. 

        Now, create the \Delta E  cuts table for double tags:

	[[./log/2010/1116/de1.png]]

	[[./log/2010/1116/de2.png]]

	How to deal with this error?

	Todo: think about background substraction. 

	
	

** 2010-11-09
   :PROPERTIES:
   :CUSTOM_ID: 20101109
   :END:

   - Evaluate the overall systematics

     1. Signal shape (DT and ST)
	
	We vary the parameter values of the signal line shape. 

	- Width of \psi(3770): +/- 2.5 MeV
	- Mass of \psi(3770): +/- 0.5 MeV/c^2
	- Blatt-Weisskopf radius: +/- 4 GeV^{-1}
          Combine the changes in the yields in quadrature to obtain the

	  ST signal: 
	
          | Mode | 281/pb (%) | 818/pb (%) |    \Delta |
          |------+------------+------------+------|
          |    0 |        0.3 |        0.4 | +0.1 |
          |    1 |        0.5 |        0.5 |    0 |
          |    3 |        0.7 |        0.5 | -0.2 |
          |  200 |        0.3 |        0.3 |    0 |
          |  201 |        1.3 |        0.5 | -0.8 |
          |  202 |        0.4 |        0.4 |    0 |
          |  203 |        0.5 |        0.5 |    0 |
          |  204 |        0.6 |        0.5 | -0.1 |
          |  205 |        0.6 |        0.5 | -0.1 |
	  
          DT signal shape:
	  281/pb: 0.2 
          818/pb: 0.2 (estimate)

     2. Double DCSD interference 
        
	In the newtural DT modes, the CFD amplitudes can interfere with
	amplitudes where both D0 and D0bar undergo DCSD. This interfence
	is controlled by the wrong sign DCSD/CFD rate ratios (R_{WS}) and
	relative phases (\delta). If we assume common values of R_WS and
	delta for the three D^0 modes, then the relative size of the
	interference effect if \Delta = 2R_WS* \cos(2\delta). R_WS = 0.004,
	yield uncertainties 0.8% (2 x 0.004 = 0.008). 
	
	Need to check the latest value of the R_WS.

	Todo: Talk to Werner and Jim with correction.

     3. Detector simulation - Tracking and K_S efficiencies

	A tracking efficiency systematic uncertainty e(charged) of
	0.3% is applied to each K candidate and each \pi candidate.

	An additional 0.6% tracking systematic uncertainty is applied to
	each K^{\pm} track.  

	A K_S^0 reconstruction efficiency systematic uncertainty of
	1.8% is applied to K_S^0 candidates.

	From CBX 2008-040 (Determination of Tracking Efficiency
	Systematics with Full 818 pb−1 Dataset), "We suggest, for
	pions, a systematic of 0.3% per pion track. For kaons, if the
	momentum spectrum averages to about 500 MeV, we suggest a
	systematic of 0.6% per kaon. "

	From CBX 2008-041 (Determination of KS0 Efficiency Systematic
	with Full 818 pb−1 Dataset): "We suggest using a 0.8%
	systematic uncertainty for each KS0, in addition to
	track-finding systematics for the two pion tracks."

     4. Detector simulation - \pi^0 efficiency

	We find a small bias and correct for it by multiplying the
        efficiencies determined in Monte Carlo simulations by 0.961^n,
        where n is the number of reconstructed \pi^0s in each final
        state.

        We assign a correlated systematic uncertainty of 2.0% to each
        \pi^0. 
	
        From CBX 2008-029 (π0 Finding Efficiencies): "We have studied
        π0 finding efficiencies in data and Monte Carlo and recommend
        that CLEO-c analyses which use the standard π0 cuts apply a
        εdata/εMC = 0.94 correction to their efficiencies. While this
        correction is stable with π0 momentum, the uncertainty on the
        correction varies from 2% at low momentum to 0.7% at 1
        GeV. For modes considered by the Dhadronic analysis, the
        uncertainty on the correction is 1.3%, but the uncertainty
        that should be applied to a given analysis may be larger or
        smaller than this number, depending on the π0 momentum
        spectrum of that analysis. "

	Todo: Check the \pi^0 momentum in D modes.  

     5. Detector simulation - Particle identification efficiencies
 
        Particle identification efficiencies are studied by
	reconstructing decays with unambiguous particle content, such
	as D^0 \to K_S^0 \pi^{+} \pi^{-} and \phi \to K^{+} K^{-}.

	We also use D^0 \to K^{-} \pi^{+} \pi^{-}, where the K^{-} and \pi^{+} 
	are distinguished kinematically. The efficiencies in ata are
	well modeled by the Monte Carlo simulation with small biases.

	We correct for these biases by multiplying the efficiencies
	determined in Monte Carlo simulations by 0.995^l \times
	0.990^m, where l and m are the numbers of PID-identified
	\pi^{\pm}s and PID-identified K^{\pm}s, respectively, in each
	final state.

	We assign correlatd uncertainties of 0.25% and 0.3% to each
	\pi^{\pm} and K^{\pm}, respectively. 
	
     6. Lepton veto

	In events with only two tracks we required D^0\to K^{-} \pi^{+} ST
        candidates to pass additional requirements to eliminate e^{+}
        e^{-} \to e^{+} e^{-} \gamma \gamma, e^{+} e^{-} \to \mu^{+} \mu^{-} \gamma \gamma, and cosmic ray
        muon events. These requirements eliminate approximately 0.1%
        of the real D^0 \to K^{+} \pi^{+} candidates, and we include a
        systematic uncertainty of 0.1% to D^0 \to K^{-} \pi^{+} ST yields to
        account for the effect of these additional requirements.

     7. Trigger simulation.

	Most modes are efficiently triggered by a two-track
        trigger. However, in the modes D^0 \to K^{-} \pi^{+} \pi^{0} and D^{+}\to K_S^0
        \pi^{+}, Monte Carlo simulation predicts a small inefficiency
        (0.1% -- 0.2%) because the track momenta may be too low to
        satisfy the trigger or because the K_S^0 daughter tracks may be
        too far displaced from the interaction region.

        For these two modes, we assign a relative uncertainty in the
        detection efficiency of the size of the trigger inefficiency
        predicted by the simulation.

	Todo: Check the ntuple, Low Track for mode with \pi^0. 

     8. |E| requirement.

	Discrepancies in detector resolution between data and Monte Carlo
	simulations can produce differences in the efficiencies of the
	\Delta E requirement between data and Monte Carlo events. 

	No evidence for such discrepancies has been found, and we
	include systematic uncertainties of 1.0% for D^{+} \to K_{S}
	\pi^{+} \pi^0 and D^{+ }\to  K^{+} K^{-} \pi^{+} decays, and
	0.5% for all other modes.

     9. Background shape
	
	We estimate the uncertainty in ST yields due to the background
	shape by repeating the ST fits with alternative background
	shape parameters. These alternative parameters are determined
	from the M_{BC} distributions of events in high and low \Delta
	E sidebands. For each mode, we fit each sideband with an ARGUS
	function to determine shape parameters and then repeat the ST
	yield fits with the ARGUS parameters fixed to these
	values. The resulting shifts in the ST yields are used to set
	the value of the systematic for each mode.

	Todo: Repeat. 

     10. Final-state radiation.

	 In Monte Carlo simulations, the reduction of DT efficiencies
	 due to FSR is approximately a factor of 2 larger than the
	 reduction of ST efficiencies due to FSR. This leads to
	 branching fraction values larger by 0.5% to 3% than they
	 would be without including FSR in the Monte Carlo
	 simulations. We assign conservative uncertainties of \pm 30%
	 of the FSR correction to the efficiency as the uncertainty in
	 each mode. This uncertainty is correlated across all modes.

	 Todo: Check the Heavy Flavor Average Group: Lorrence's approach for FSR.

     11. Resonant substructure

         The observed resonant substructures of three- and four-body
         decay modes in our simulations are found not to provide a
         perfect description of the data. Such disagreements can lead
         to wrong estimates of the efficiency in the simulation. We
         estimate systematic uncertainties fo rthe three- and
         four-body modes from the observed discrepancies. The
         uncertainties in efficiency are not correlated between modes,
         but the correlations in systematic uncertainties for the
         efficiency of mode i are taken into account in \epsilon_i,
         \epsilon_{ij}, and \epsilon_{ii}.
	   
	 Todo: Will repeat this process.

     12. Multiple candidates

         In our event selection, we chose a single candidate per event
         per mode. So, in general, because the correct candidate was
         not always chosen, our signal efficiencies depend on the rate
         at which events with multiple candidates occur.  Using signal
         Monte Carlo samples, we estimate the probability of choosing
         the wrong candidate, P, when there are multiple candidates
         present.

         We also study the accuracy with which the Monte Carlo
         simulations model the multiple candidate rate, R, in data. If
         P is nonzero and if R differs between data and Monte Carlo
         events, then the signal efficiencies measured in Monte Carlo
         simulations are systematically biased; if only one of these
         conditions is true, then there is no eficiency bias.

         Based on teh measured values of P(R_data/R_MC - 1), we assign
         the systematic uncertainties to ST effieiencies. For each
         decay mode the multiple candidate systemtic is correlated
         between teh D and \bar{D} decay for single tags.
	 
	 - Todo: Repeat and may ask Peter. 
     13. Luminosity.

         For the e^{+} e^{-} \to D \bar{D} peak cross section
         measurements, we include additional uncertainties from the
         luminosity measurement (1.0%).

	 Not going to change.



	 





** 2010-11-02
   :PROPERTIES:
   :CUSTOM_ID: 20101102
   :END:
   
    - CLEO PTA Talk for November 2010 ([[./doc/pta201011/xshi-pta-20101105.pdf][PDF]])

      Comments:

      p3: Add sub items for the details. Since the May CLEO meeting in
      the subtitle. Put two or three plots such as the reference
      modes, Ks 3 pi. 
   
      External backgrounds: some words to explain. 
   
      Peaking backgrounds plots, the internal modes are very small. 
   
      p4: Change the label(281ipbv0, v7) , mention the different
      parameters.  font size. 

      p5: font size. 

      p6: review on the syst, in stead of specific items. 

      


    - Question about the \Delta E cuts systematics:

      [[./log/2010/1102/20101102-1.png]]

      [[./log/2010/1102/20101102-2.png]]

    - Which category of the systmatic errors shall we improve? 
      Make a final list evaluate which one is worth to improve. 
      Go back to the previous procedure and evaluate. 

      
      
      

      

      

** 2010-10-26
   :PROPERTIES:
   :CUSTOM_ID: 20101026
   :END:

    - Update on the [[./doc/cbx818/dhadcbx818.pdf][CBX]]
      1. Updated the PDG 2010 for the external background study
      2. Added double and single tags figures (not for the generic
         single tags, still running)
    - Systematics Study
      Done the variation for the lineshapes, noFSR, and Wide Delta E
    - Plan to give an update on CLEO meeting on Nov. 5th. 
      - Update on the external backgrounds absolute value?

      




** 2010-10-19
   :PROPERTIES:
   :CUSTOM_ID: 20101019
   :END:

   - Update on the [[./doc/cbx818/dhadcbx818.pdf][CBX]]
     1. Added section "What's new"
     2. Updated the figures for bkg (genreic, cont, tau, radret)
     3. Updated the BF fit results table, including the luminosity for
        818/pb

   - Todo:
     Update the bkg efficiency table 
     Update the generic MC fitting


** 2010-10-12
   :PROPERTIES:
   :CUSTOM_ID: 20101012
   :END:

   - Test the SL5

     After setting the same random seeds for both CLEOG and Pass2, I
     got the same number of D candidates. 

     Generate exact the same MC by setting the same random seeds. 

     | Mode Dp to Kspipipi                     |  SL4 |  SL5 |
     |-----------------------------------------+------+------|
     | Numbers generated (CLEOG, Pass2, DSkim) | 3931 | 3931 |
     | Numbers of D candidates                 | 1475 | 1475 |
 

   - Draft of CBX avaliable at: [[http://www.lepp.cornell.edu/~xs32/private/DHad/][Page]].

      - V1.23: Update the branching fraction fit results tables 
      
      - V1.21: Update the paragraphs and most of the tables up to
        Section "Backgrounds".

   - Question:

     Found "nan" value in the branching fit: 

     : sigma(D0D0bar) = 10637.9 +- 28.7876 (stat) +- 164.145 (syst)
     : sigma(D+D-) = 8390.41 +- 29.5951 (stat) +- 127.355 (syst)
     : Correlation coeff between sigma(D0D0bar) and sigma(D+D-): 0.721828
     : sigma(DDbar) = 19028.3 +- 41.2868 (stat) +- 273.165 (syst)
     : chg/neu = 0.788725 +- 0.0103848 (stat) +- nan (syst)

     The raw output can be found at: [[http://www.lepp.cornell.edu/~xs32/private/DHad/10.1/dat/brf/818ipbv7/bf_stat_sys][here]].

   - Todo:

      1. Finish the Backgrounds section

      2. Finish the Generic MC fitting

      3. Update 818 lumi
	 : grep 281 data* -r                                                         
	 : data_crosssectionsdef:281.53
	 : data_statonly_crosssectionsdef:281.53
	 : data_yields_for_werner:281.6195574352
      4. Fix "nan" error







** 2010-10-05
   :PROPERTIES:
   :CUSTOM_ID: 20101005
   :END:
   
   - Backgrounds study
 
     1. Increased the yld limit from 2000 to 200,000.  [[./10.1/fig/generic_ddbar_single_p_281ipbv10.org][figure]] 

	Compare the \Chi^2/Ndof between default background fitting and
	without gaussian => [[./10.1/tab/m_diff_chisq_default_nogaus_281ipbv10.org][table]]
    
	
     2. Add no crossfeeds cuts  [[./10.1/fig/generic_ddbar_single_p_281ipbv10_noxfeed.org][figure]] 

     3. Backgrounds components:
	- Backgrounds from the generic ddbar MC => [[http://www.lepp.cornell.edu/~xs32/private/DHad/10.1/tab/bkg_names_generic_ddbar_Single_D0_to_Kpi_281ipbv10.html][table]] 
	- Backgrounds from the generic ddbar MC with no crossfeeds => [[http://www.lepp.cornell.edu/~xs32/private/DHad/10.1/tab/bkg_names_generic_ddbar_Single_D0_to_Kpi_281ipbv10_noxfeed.html][table]]
      

     4. Fit the background for the 537/pb generic MC (20xlumi)

	With crossfeeds: [[./10.1/fig/generic_ddbar_single_p_537ipbv10.org][figure]] 

	With no crossfeed:  [[./10.1/fig/generic_ddbar_single_p_537ipbv10_noxfeed.org][figure]]

	Just more entries observed, no additional new features found. 

	Will move on to 818/pb case. 

   - Test the SL5

     Generate exact the same MC by setting the same random seeds. 

     | Mode Dp to Kspipipi                     |  SL4 |  SL5 |
     |-----------------------------------------+------+------|
     | Numbers generated (CLEOG, Pass2, DSkim) | 3931 | 3931 |
     | Numbers of D candidates                 | 1475 | 1471 |
     
     Found 4 events difference! 

     Compare the unique events for SL4 and SL5 => [[./10.1/tab/compare_events_signal_Single_Dp_to_Kspipipi_281ipbv13_281ipbv14.org][table]] 

     There are 14 unique events in SL4 and 10 unique events in SL5
     case. 

     How deep shall we dig into? Open to suggestions... 

   - Todo:

     1. Add seperate value for \Chi^2 and Ndof

     2. Set random seeds in Pass2. 

     3. Release the first draft of CBX. 




     



** 2010-09-28
   :PROPERTIES:
   :CUSTOM_ID: 20100928
   :END:
   
   - Backgrounds study
     
     1. Use fixed width from 281/pb data fitting for the gaussian
	
	Add \chi^2 / N d.o.f in the plots (extracted from frame): [[./10.1/fig/generic_ddbar_single_p_281ipbv10.org][figure]] 

	For comparison, also fitted with float width:  [[./10.1/fig/generic_ddbar_single_p_281ipbv10_floatsigma.org][figure]] 

	We can see that having a fixed value for the gauss shape makes
	the fitting more reliable. 

	However, there are still one mode which has \Chi^2/ndof large than 20. 

	Also, we noticed that some yields are reaching the 1000 limit,
	but don't know the reason. 

     2. Fit without Gaussian signal: [[./10.1/fig/generic_ddbar_single_p_281ipbv10_nogaus.org][figure]]  

	This fitting is done by setting the parameter 'yld' fixed as
	1, namely only one yield. (I tried to set it as 0, but failed,
	Jim suggested me to use 1 and it worked.)

	If we compare this group of figures with the previous one
	([[./10.1/fig/generic_ddbar_single_p_281ipbv10.org][figure]]), we are seeing a smaller \Chi^2/ndof. Intuitively,
	the fitting with less free parameter should not be better than
	the one with more free parameters. 

	This might have something to do with the fitting procedure in
	the previous one, where we saw some modes have 1000 limit on
	the yld. 

     3. Above all, the peaking feature in mode Kpi are still
        there. What shall we do for this?

   - Todo:
     
     1. Add crossfeed cuts

     2. Check the yld limit (2000)

     3. Look up the MCTruth for klv

     4. Plot the \Delta E 






** 2010-09-21
   :PROPERTIES:
   :CUSTOM_ID: 20100921
   :END:

   - Backgrounds study

     Reproduced the generic backgrounds fitting:  [[./10.1/fig/generic_ddbar_single_p_281ipbv10.org][figure]] (from last week [[./10.1/fig/generic_ddbar_background_single_281ipbv10.org][figure]] )
     
     Parsed the backgrounds components:
     
     - Backgrounds from the generic ddbar MC => [[./10.1/tab/bkg_generic_ddbar_single_p_281ipbv10.org][table]]
     - Backgrounds for the generic ddbar MC on mode 0 with mBC cuts 1.86-1.87 => [[./10.1/tab/bkg_names_peak_generic_ddbar_Single_D0_to_Kpi_281ipbv10.org][table]]
   - Ran interactive job on SL5

   - Todo:
     1. Fit without the gaussian 
     2. Compare the \chi^2 
     3. Start with the non-gaussian part and use those parameters as
        input to see if it works. 
     4. Fix the width of the modes as the value from data
     5. Detailed test on the SL5 machine


** 2010-09-14
   :PROPERTIES:
   :CUSTOM_ID: 20100914
   :END:

   - Backgrounds study

     Reproduced the generic backgrounds fitting:  [[./10.1/fig/generic_ddbar_background_single_281ipbv10.org][figure]]   
     
     Continuum background fitting: [[./10.1/fig/generic_cont_background_single_281ipbv10.org][figure]] 

   - Todo:
     1. Check the selection cuts
     2. Check the parameters upperlimit
     3. Fit the continuum with no signal and compare the \chi^2
     4. Check the one-dimention distribution ?
     5. Run interactive job on SL5






** 2010-09-07
   :PROPERTIES:
   :CUSTOM_ID: 20100907
   :END:

   - Backgrounds study
     
     1. Done: creating the ntuple for the 537/pb generic-mc-ddbar
        sample by truncating to multipl jobs based on the runs

     2. Done: creating the ntuple for the 281/pb continuum, raditive
        return, and tau-pairs MC samples in the latest software
        environment.  

     3. In progress: fit the generic ddbar MC for 281/pb, reproduce
        the figure 72 from our dhadcbx281. 

	Started from Peter's script:

	: /nfs/cor/user/ponyisi/hadD/summerconf/bkggeneric.py

	Also found another file: =bkggeneric-dfix.py=, learning the
	details. 

     4. Plan: reproduce all of the background plots for 281/pb from
        the cbx, then apply the same procedure on the 537/pb MC,
        finally for the full sample 818/pb. 




** 2010-08-03
   :PROPERTIES:
   :CUSTOM_ID: 20100803
   :END:

   - Backgrounds study
     
     1. Ran the 5xlumi continuum for 281/pb   => [[./10.1/tab/bkg_generic_cont_single_281ipbv10.org][table]] ([[./10.1/tab/bkg_generic_cont_single_281ipbv10.info][info]])   

	Normalized table: => [[./10.1/tab/bkg_generic_single_281ipbv10.org][table]] ([[./10.1/tab/bkg_generic_single_281ipbv10.info][info]])

	Read the previous CBX, need to do the mBC fit to check the 
	peaking background on continuum, radiative return, and \tau-pairs

     2. Ran the Ntuple on the 537/pb ddbar generic sample. 

	There are unfinished root file due to the large data sample
	and was terminated by the server after running for more than
	two days. 

	Need to break down the runs and submit to multiple jobs. 

	

** 2010-07-27
   :PROPERTIES:
   :CUSTOM_ID: 20100727
   :END:

   - Backgrounds study

     - Backgrounds for the generic MC (10xlumi for original 281/pb data) => [[./10.1/tab/bkg_generic_single_281ipbv0.org][table]] 
       Listed the first 20 modes contributing to the backgrounds. 
 
     - The DCSD decays has been taken into consideration for neutral
       D's.

   - Todo:
     1. Get the backgrounds for new generic MC (20xlumi) in progress. 
     2. Looks no new continuum generic MC from this [[https://wiki.lepp.cornell.edu/lepp/bin/view/CLEO/Private/SW/DataBase#Dskimmed_generic_MC][page link]]. Not
        planing to run for now. 
	
	Check this [[https://wiki.lepp.cornell.edu/lepp/bin/view/CLEO/Private/SW/CLEOcMCstatus][page]] for continuum. 





	
** 2010-07-20
   :PROPERTIES:
   :CUSTOM_ID: 20100720
   :END:

   - Backgrounds study

     1. Made ntuple for the original generic MC (dtag v1 10xlumi,
        281/pb data,  size 24G) 

     2. Made ntuple for the new generic MC (dtag v2, 20xlumi, 818/pb
        data, size 140G)

     3. Analyze the faking signal: [[./10.1/tab/bkg_generic_single_281ipbv0.org][table]]
	
   - Todo:
     1. Include the charge conjugate mode for neutral D
     2. List the modes name for >1000
     3. Look at the continuum MC

 




** 2010-07-13
   :PROPERTIES:
   :CUSTOM_ID: 20100713
   :END:

   - Found the difference for the data yields in 281/pb ([[./10.1/tab/compare_yields_data_single_281ipbv0_281ipbv7.org][table]]) 

     1. Some events were not availiable in eventstore in 20060208 for
	dtag but accessible in 20070822. I have tried to use the
	"goto" feature in suez, they comfirmed that no events were
	processed. This can explain the increase for the extracted
	yields in [[./10.1/tab/compare_entries_data_single_281ipbv0_281ipbv7.org][table]].

     2. I checked the mBC distribution of those events, and found they
        are just "normal" events. For example mode D0toKpi: [[./10.1/fig/var_mbc_data_Single_D0_to_Kpi_281ipbv7_skim.org][figure]]

     3. I used different line shape parameters for mBC fitting 
        | Parameter | 281ipbv0 | 281ipbv9 |
        |-----------+----------+----------|
        | Gamma     |   0.0286 |   0.0252 |
        | R         |     12.3 |     12.7 |
        | Mres      |   3.7718 |   3.7724 |
	
	Once I use the old parameters and fit the old data in the new
	environment, I got a consistent result.  [[./10.1/tab/compare_yields_data_single_281ipbv0_281ipbv10.org][table]]

     4. Now, fit new data in new env with old parameters:  [[./10.1/tab/compare_yields_data_single_281ipbv0_281ipbv11.org][table]]

	This time, it reflex the in crease of the yields befor mBC
	fitting. 

  - Question: 
     1. How are we going to deal with these difference in data?
        Systematic error? 

	A: Not error, since we have taken care of the
        lost luminosity in the original measurement. 

     2. Should we use the same line shape parameters (Gamma, r, mass)
        as the new MC? 
	
	A: As we keep it consistent, the only thing matters is the
	associated systematic errors. So, I'll just move on with the
	new line shape parameters we use for the new signal MC. 

  - Todo:
    1. Check the DTag page for the missed jobs. Here is the first
       posting on the HyperNews:

       https://hypernews.lepp.cornell.edu/HyperNews/get/DTag/23.html


    2. Run the generic, make mBC fitting for the wrong MC in the
       MCTruth  



** 2010-07-06
   :PROPERTIES:
   :CUSTOM_ID: 20100706
   :END:

   - Getting event details for those listed in [[./10.1/tab/compare_events_data_single_281ipbv0_281ipbv7.org][table]]

     - Skimmed the data ntuple by using the "goto" feature in suez

     - Tested the 90 events which are unique in the new data on the
       old data skim, should expect 0. However, all of them were
       selected! It means that the selection scripts after ntuple was
       all the same, but those events may not stored in the old
       ntuple. 

     - Ran the test to check the 90 events for all of the old ntuple
       data, but found none of them!

     - Now the question is why those events get cut off when not using
       the "goto" feature in suez?

     - Check the dataset distribution for the unique events => [[./10.1/tab/parse_events_data_single_281ipbv7.org][table]]

       It looks like the unique events are mostly distributed in
       data36, since we are using the same timestamp for the datasets
       in the eventstore, there is no obvious reason to explain this
       behavior, any suggestions?

   - Todo
     
     Create the table for the run with events list, and send the
     logfile link to the DHad HyperNews.  

      => [[./10.1/tab/parse_runs_data_single_281ipbv7.org][table]] ([[./10.1/tab/parse_runs_data_single_281ipbv7.info][info]]) 

      Logfiles link: [[./dat/data/2.1][281ipbv0]] , [[./dat/data/10.1.7][281ipbv7]]

      Data36:
      281ipbv0: http://www.lepp.cornell.edu/~xs32/private/DHad/dat/data/2.1/dtuple-data36.txt

      281ipbv7: http://www.lepp.cornell.edu/~xs32/private/DHad/dat/data/10.1.7/dtuple-data36.txt
 



** 2010-06-29
   :PROPERTIES:
   :CUSTOM_ID: 20100629
   :END:

   - Getting event details for those listed in [[./10.1/tab/compare_events_data_single_281ipbv0_281ipbv7.org][table]]

     First try, read the data sample on the fly but very slow. 

     Second try (last week), use ROOT scripts (MakeClass) to Skim the
     Ntuple based on the events, still very slow. 

     Thrid try, using suez goto feature to skim, very fast. 

     Now, have the skimed ntuple and ready to explore the cuts.


** 2010-06-22
   :PROPERTIES:
   :CUSTOM_ID: 20100622
   :END:

   - Getting event details for those listed in last week's [[./10.1/tab/compare_events_data_single_281ipbv0_281ipbv7.org][table]]
     
     Due to the large number of events in data sample, it's very time
     cosuming to do it on the fly. I'm working on to Skim the ntuple
     based on those unique events and then study the cuts. 

     Now, the C++ scripts to read the events info and output to the
     Ntuple is done, need to run on the data sample. 

     
     
** 2010-06-15
   :PROPERTIES:
   :CUSTOM_ID: 20100615
   :END:

   1. Compare the number of events from evtfiles between 281ipbv0 and 281ipbv7:  [[./10.1/tab/compare_entries_data_single_281ipbv0_281ipbv7.org][table]] 

   2. List the unique events in 28ipbv0 and 281ipbv7:  [[./10.1/tab/compare_events_data_single_281ipbv0_281ipbv7.org][table]]

   3. Todo:
      Check the events number in the ntuple stage for Kpi 


** 2010-06-08
   :PROPERTIES:
   :CUSTOM_ID: 20100608
   :END:
   
   1. Fit mBC with original parameters for data and signal MC
      - Compare the yields between 281ipbv0 and 281ipbv8 for 281/pb
        data => [[./10.1/tab/compare_yields_data_single_281ipbv0_281ipbv8.org][table]] 
      - Compare the yields between 281ipbv0 and 281ipbv8 for 281/pb singal MC => [[./10.1/tab/compare_yields_signal_single_281ipbv0_281ipbv8.org][table]] 
      - Compare the diffs from the above two tables => [[./10.1/tab/compare_diff_yields_data_single_281ipbv0_281ipbv8_yields_signal_single_281ipbv0_281ipbv8.org][table]] 
      - Conclusion: the momentum resolution parameters are not the
        reason for the difference in yields. 

      - Todo: Check the selected events before the mBC fitting, event
        by event.  


   2. Check the double tag numbers: 

      There are three modes which has different generated numbers for
      double tags. 

      | FileName                                   | Original |  New |
      |--------------------------------------------+----------+------|
      | Double\_D0\_to\_Kpipi0\_\_D0B\_to\_Kpipi0  |     3674 | 2000 |
      | Double\_D0\_to\_Kpipi0\_\_D0B\_to\_Kpipipi |     2023 | 2000 |
      | Double\_D0\_to\_Kpipipi\_\_D0B\_to\_Kpipi0 |     2023 | 2000 |

      These differences had been considered into the efficiency
      calculation. 

   3. Check the background scale up 

      There are two files used for the BF fitting:

      [[./10.1/dat/brf/281ipbv7/data_statonly_external_bkg_bfs_for_werner][data\_statonly\_external\_bkg\_bfs\_for\_werner]]

      Notice the second line after the name are all zero, so I guessed
      that line means systematic. 

      [[./10.1/dat/brf/281ipbv7/data_external_bkg_bfs_for_werner][data\_external\_bkg\_bfs\_for\_werner]]

      Applied the factor on both cases. 


** 2010-06-01
   :PROPERTIES:
   :CUSTOM_ID: 20100601
   :END:

   1. Done with restoring pi0 and Kshort cuts to DSkimv1

      - 281/pb
	- Compare the yields between 281ipbv0 and 281ipbv7 for 281/pb
           data  => [[./10.1/tab/compare_yields_data_single_281ipbv0_281ipbv7.org][table]] 
	- Compare the yields between 281ipbv0 and 281ipbv7 for 281/pb
           signal MC => [[./10.1/tab/compare_yields_signal_single_281ipbv0_281ipbv7.org][table]] 
	- Compare the diffs from the above two tables => [[./10.1/tab/compare_diff_yields_data_single_281ipbv0_281ipbv7_yields_signal_single_281ipbv0_281ipbv7.org][table]] 
	- Compare the Branching Fractions =>  [[./10.1/tab/compare_brf_data_results_281ipbv0_281ipbv7.org][table]] 
	- The momentum resolution parameters for 281ipbv0 => [[./7.06/tables/double_line_shape_paras.html][table]]
	- The momentum resolution parameters for 281ipbv7 => [[./10.1/tab/para_momentum_resolution_281ipbv7.org][table]]

     - 537/pb
	- Compare the yields with 281/pb for data  => [[./10.1/tab/compare_yields_data_single_281ipbv0_537ipbv7.org][table]] 
	- Compare BF with 281ipbv7 => [[./10.1/tab/compare_brf_data_results_281ipbv7_537ipbv7.org][table]]
      - 818/pb
	- Compare BF with 281ipbv7  => [[./10.1/tab/compare_brf_data_results_281ipbv7_818ipbv7.org][table]] 

   2. What should be done next? 
      - Systematics: 
	- Single Tag Background modeling
	- Double DCSD interference
	- Deterctor simulation
	- Lepton veto
	- Trigger simulation
	- Final state radiation
	- |\Delta E| requirement
	- Signal line shape
	- Resonant substructure
	- Multiple candidates
     - Anything else? 
   3. Todo
      - [X] Add links of the parameters to today's meeting page
      - [X] Fit mBC with original parameters for data and signal MC
      - [X] Check the double tag generated numbers 
      - [X] Check the background scale up also applys to error for 537/pb
      - [X] Change the BFs table 10E6 to 1E6 
      - Change the NDDbar in BFs table dived by 1.91 for 537/pb 


** 2010-05-25
   :PROPERTIES:
   :CUSTOM_ID: 20100525
   :END:
   
   - Progress on restoring pi0 and Kshort cuts to DSkimv1

     1. Re-ntupled the data and single tag MC by adding the variable
        "isType1Pi0" as suggested by Peter last week. It does the work
        very well. 

     2. Updated the selection scripts using this new variable to match
        the Dskimv1 pi0

     3. Updated the scripts to use the 3-sigma mass window for Kshorts.

     4. Working on the double tags MC of the 281/pb, will give the
        yield efficiency as well as the branching fractions by next
        week.





** 2010-05-18
   :PROPERTIES:
   :CUSTOM_ID: 20100518
   :END:
   
   - Progress on restoring pi0 cuts to DSkimv1

     1. Read the doc about Dskimv1 and v2 

     2. Confirmed that the difference is the E9/E25

	The v1 used "E925Scheme" default value 1 (both showers must satisfy 1% E9/E25 cuts, uses Unfolded-E9/E25 if the 2 showers are closer than 25cm)

	The v2 used 0, means no E9/E25 cuts

     3. Tried to implement this same cut on the ntuple, but after talking with Brian, he pointed that the cuts is non-trivial as stated on the manual. So, I'm working on re-skim the files now. 


** 2010-05-11
   :PROPERTIES:
   :CUSTOM_ID: 20100511
   :END:
   
   1. Now: Working on using the DSkimv1 cuts on the Dskim v2 sample

      pi0 and Kshort

   2. Next: find out the neutral D branching fractions discrepancies in 818/pb data

   3. Future: Study the backgrounds in the DSkimv2 between DT and MC.


   
** 2010-05-04
   :PROPERTIES:
   :CUSTOM_ID: 20100504
   :END:

   1. Fixed the problem of crossfeeds matrix 

      In the original script:

      :             a   = float(st.split()[-2])
      :             b   = float(st.split()[3])  # signal MC yield/error on yield
      :             if a > 0 and abs(1-b) > 3 and\
      :                    idstring not in attr.veto_fakes_string_list:
      
      : veto_fakes_string_list = ['D0_to_Kpipi0 fakes Dp_to_Kpipi:',
      :                           'D0_to_Kpipi0 fakes Dp_to_Kspipi0:',
      :                           'D0B_to_Kpipipi fakes Dm_to_Kpipipi0:',
      :                           'Dp_to_Kpipi fakes D0B_to_Kpipipi:']

      The criteria of "a > 0 and abs(1-b) > 3" are effectively only select Kpi for the matrix.

      However, in the new MC, that criteria is no longer effective, it picks up more elements in the matrix. 

      The updated script using to make sure only the Kpi is used in the matrix.

      : used_crossfeeds = ['D0_to_Kpi fakes D0B_to_Kpi:', 'D0B_to_Kpi fakes D0_to_Kpi:']

      To see this is taking the effect, one can see the following tables.
 
      - 281ipbv0: The original one (PRD 2007)
      - 281ipbv5: Using the latest CLEO software release for data 281/pb
      - 281ipbv6: Same as 281ipbv5, only consider two crossfeeds
 
      | Label    | 281ipbv0 |
      |----------+----------|
      | 281ipbv0 |          |
      | 281ipbv5 | [[./10.1/tab/compare_brf_data_results_281ipbv0_281ipbv5.org][table]]    |
      | 281ipbv6 | [[./10.1/tab/compare_brf_data_results_281ipbv0_281ipbv6.org][table]]    |
	
   2. The new results for 537/pb and 818/pb data using the right matrix

      - 281ipbv0: The original one (PRD 2007)
      - 537ipbv6: Using the latest CLEO software, only use Kpi crossfeeds, scale up bkgs for absolute
      - 818ipbv6: New CLEO software v5, only use Kpi crossfeeds, scale up bkgs for absolute 

        | Label    | 281ipbv0 |
        |----------+----------|
        | 281ipbv0 |          |
        | 537ipbv6 | [[./10.1/tab/compare_brf_data_results_281ipbv0_537ipbv6.org][table]]    |
        | 818ipbv6 | [[./10.1/tab/compare_brf_data_results_281ipbv0_818ipbv6.org][table]]    |

	Noticed large difference in the 818/pb case for the D0s.


   3. Draft slides for the CLEO PTA talk ([[./doc/pta20105/dhadbf818.pdf][PDF]]). 



** 2010-04-27
   :PROPERTIES:
   :CUSTOM_ID: 20100427
   :END:
   
   1. Crossfeeds fitting - difference with Peter's 
      - 7.06: The original one (PRD 2007)
      - 281ipbv0: Using Peter's crossfeed result (=yields_and_efficiencies= file)
      - 281ipbv0.1: Using Peter's crossfeed evt file as input, fit with ROOT4.03, RooFitv1.92 
      - 281ipbv0.2: Using Peter's crossfeed evt file as input, fit with ROOT5.26, RooFitv3.12

       | Label      | BFs compare with PDG2004 |
       |------------+--------------------------|
       | 7.06       | [[./7.06/tables/cbx_data_results_pdg_K0S][table]]                    |
       | 281ipbv0   | [[./10.1/tab/compare_data_results_pdg_281ipbv0.org][table]]                    |
       | 281ipbv0.1 | [[./10.1/tab/compare_data_results_pdg_281ipbv0.1.org][table]]                    |
       | 281ipbv0.2 | [[./10.1/tab/compare_data_results_pdg_281ipbv0.2.org][table]]                    |

	Compare with 7.06:

	https://www.lepp.cornell.edu/~xs32/private/DHad/t10.1#281ipbv0


   2. Preliminary BF results for the full data sample

      - Processed the 281/pb and 537/pb sample with the old systmatic errors
	
	Figures:
        | Type                  | 281ipbv5 | 537ipbv5 | 818ipbv5 |
        |-----------------------+----------+----------+----------|
        | Resolution parameters | [[./10.1/fig/signal_diagdouble_281ipbv5_resolution.org][figure]]   | [[./10.1/fig/signal_diagdouble_537ipbv5_resolution.org][figure]]   | [[./10.1/fig/signal_diagdouble_818ipbv5_resolution.org][figure]]   |
        | Signal MC single tags | [[./10.1/fig/signal_single_281ipbv5.org][figure]]   | [[./10.1/fig/signal_single_537ipbv5.org][figure]]   | [[./10.1/fig/signal_single_818ipbv5.org][figure]]   |
        | Signal MC double tags | [[./10.1/fig/signal_double_281ipbv5.org][figure]]   | [[./10.1/fig/signal_double_537ipbv5.org][figure]]   | [[./10.1/fig/signal_double_818ipbv5.org][figure]]   |
        | Data single tags      | [[./10.1/fig/data_single_281ipbv5.org][figure]]   | [[./10.1/fig/data_single_537ipbv5.org][figure]]   | [[./10.1/fig/data_single_818ipbv5.org][figure]]   |
        | Data double tags      | [[./10.1/fig/data_double_281ipbv5.org][figure]]   | [[./10.1/fig/data_double_281ipbv5.org][figure]]   | [[./10.1/fig/data_double_818ipbv5.org][figure]]   |
	
	Tables:

        | Label      | BFs compare with PDG2004 |
        |------------+--------------------------|
        | 7.06       | [[./7.06/tables/cbx_data_results_pdg_K0S][table]]                    |
        | 281ipbv5   | [[./10.1/tab/compare_data_results_pdg_281ipbv5.org][table]]                    |
        | 537ipbv5   | [[./10.1/tab/compare_data_results_pdg_537ipbv5.org][table]]                    |
        | 818ipbv5   | [[./10.1/tab/compare_data_results_pdg_818ipbv5.org][table]]                    |


      Questions:
      1. Why larger D2KsPi for 281/pb?
      2. Why 818/pb has lower D2KPi BF? 
         |                        | N1 (MC) | N2 (MC) | N1 (Data) | N2 (Data) |
         |------------------------+---------+---------+-----------+-----------|
         | 281/pb                 |   40724 |   41510 | 25726     | 26204     |
         | 537/pb                 |   81525 |   82518 | 49545     | 49468     |
         | 818/pb                 |  122248 |  124031 | 75252     | 75656     |
         | (281/pb+537/pb)-818/pb |       1 |      -3 | 19        | 16        |
#+TBLFM: @5$2=@2$2+@3$2-@4$2::@5$3=@2$3+@3$3-@4$3::@5$4=@2$4+@3$4-@4$4::@5$5=@2$5+@3$5-@4$5


   3. Talk for next week (response to Werner)

      Update on the 818/pb D-Hadronic analysis

 - Todo:

   1. Check the crossfeeds with Peter, send him the file link for fitting

   2. Read the output for the BF fitter

   3. Check the background file not using the absolute number

   4. Make the slides by next week


** 2010-04-20
   :PROPERTIES:
   :CUSTOM_ID: 20100420
   :END:

   - Updating the =yield_and_efficiencies= file. 

     - Fixed the plotting error by using the RooFit C++ interface, instead of PyROOT.

     - Also works on the default CLEO ROOT(4.03) and previous RooFit(1.92)

     - Fitting plots

       | Label                    | Diagonal | Non-Diagonal |
       |--------------------------+----------+--------------|
       | Peter's                  | [[./10.1/fig/crossfeeds_signal_diag_281ipbv0.org][figure]]   | [[./10.1/fig/crossfeeds_signal_nondiag_281ipbv0.org][figure]]       |
       | My Version with ROOT4.03 | [[./10.1/fig/crossfeeds_signal_diag_281ipbv0.1.org][figure]]   | [[./10.1/fig/crossfeeds_signal_nondiag_281ipbv0.1.org][figure]]       |
     
     - Notice some difference in the Non-Diagoal fitting, while the
       Diagonal fitting are very similar (the last two columns).

       | Mode                                  | Peter's | My Version | Parameter fit (Peter) | Parameter (my) |
       |---------------------------------------+---------+------------+-----------------------+----------------|
       | D0B\_to\_Kpipi0 fakes Dm\_to\_Kspipi0 | [[./10.1/fig/281ipbv0/crossfeeds/signal_Single_D0B_to_Kpipi0_fakes_Single_Dm_to_Kspipi0.pdf][fig]]     | [[./10.1/fig/281ipbv0.1/crossfeeds/signal_Single_D0B_to_Kpipi0_fakes_Single_Dm_to_Kspipi0.pdf][fig]]        | [[./10.1/fig/281ipbv0/crossfeeds/signal_Single_Dm_to_Kspipi0_fakes_Single_Dm_to_Kspipi0.pdf][fig]]                   | [[./10.1/fig/281ipbv0.1/crossfeeds/signal_Single_Dm_to_Kspipi0_fakes_Single_Dm_to_Kspipi0.pdf][fig]]            |
       | Dm\_to\_Kpipi fakes D0B\_to\_Kpipi0   | [[./10.1/fig/281ipbv0/crossfeeds/signal_Single_Dm_to_Kpipi_fakes_Single_D0B_to_Kpipi0.pdf][fig]]     | [[./10.1/fig/281ipbv0.1/crossfeeds/signal_Single_Dm_to_Kpipi_fakes_Single_D0B_to_Kpipi0.pdf][fig]]        | [[./10.1/fig/281ipbv0/crossfeeds/signal_Single_D0B_to_Kpipi0_fakes_Single_D0B_to_Kpipi0.pdf][fig]]                   | [[./10.1/fig/281ipbv0.1/crossfeeds/signal_Single_D0B_to_Kpipi0_fakes_Single_D0B_to_Kpipi0.pdf][fig]]            |

       Why such difference ? => See CBX p19  ([[./doc/dhadcbx281/dhadcbx.pdf][PDF]])


     - Fit the Branching Fractions:

       - The original one (7.06, PRD 2007): => [[./7.06/tables/cbx_data_results_pdg_K0S][table]]

       - Branching Fraction: Using Peter's =yields_and_efficiencies= file  => [[./10.1/tab/compare_data_results_pdg_281ipbv0.org][table]]

       - 281ipbv0.1 : Using Peter's crossfeed evt file as input, fit with ROOT4.03, RooFitv1.92 => [[./10.1/tab/compare_data_results_pdg_281ipbv0.1.org][table]]

	 - Compare with PRD 2007 (281ipbv0)  => [[./10.1/tab/compare_brf_data_results_281ipbv0_281ipbv0.1.org][table]] 

       - 281ipbv0.2 : Using Peter's crossfeed evt file as input, fit with ROOT5.26, RooFitv3.12  => [[./10.1/tab/compare_data_results_pdg_281ipbv0.2.org][table]] 

	 - Compare with 281ipbv0.1 => [[./10.1/tab/compare_brf_data_results_281ipbv0.1_281ipbv0.2.org][table]] 

   - Process on the 537ipb => done with the mBC fit, see [[http://www.lepp.cornell.edu/~xs32/private/DHad/src/10.1.5/dot/p537.png][diagram]].





** 2010-04-13
   :PROPERTIES:
   :CUSTOM_ID: 20100413
   :END:

   - Updating the =yield_and_efficiencies= file. 

     - Fixed previous crash by installing ROOT5.26 and Python2.6

     - Using the same input from Peter and can reproduce the fits 

       
       Peter's plot for one mode:

       [[./log/2010/0413/peter/signal_Single_Dp_to_Kspipipi_fakes_Single_Dp_to_Kspipip.pdf][ ./log/2010/0413/peter/signal_Single_Dp_to_Kspipipi_fakes_Single_Dp_to_Kspipip.png]]
       
       My plot for the same mode:
       
       [[./log/2010/0413/signal_Single_Dp_to_Kspipipi_fakes_Single_Dp_to_Kspipip.pdf][ ./log/2010/0413/signal_Single_Dp_to_Kspipipi_fakes_Single_Dp_to_Kspipip.png]]
       
       - The only difference is the background can not be ploted as stated in the message after fitting:

	 : [#0] ERROR:Plotting -- RooAbsPdf::plotOn(sumpdf_float) ERROR: component selection set  =  does not match any components of p.d.f.
	 
	 Peter's code:([[./src/10.1.5/python/peter/stupidcrossfeedplot.py][link]]), My code ([[./src/10.1.5/python/fit/crossfeeds.py][link]]).

   - Next: Updating the yields and efficiencies and update the BFs. 



** 2010-04-06
   :PROPERTIES:
   :CUSTOM_ID: 20100406
   :END:

   - Run BF fitter on 281/pb - now can reproduce the previous results

     - Found the difference: 

       I used different generated numbers for Several modes in Double Tags:

       | Modes                                      | Original |  New |
       |--------------------------------------------+----------+------|
       | Double\_D0\_to\_Kpipi0\_\_D0B\_to\_Kpipi0  |     3674 | 2000 |
       | Double\_D0\_to\_Kpipi0\_\_D0B\_to\_Kpipipi |     2023 | 2000 |
       | Double\_D0\_to\_Kpi\_\_D0B\_to\_Kpi        |     2000 | 2000 |
       | Double\_D0\_to\_Kpipipi\_\_D0B\_to\_Kpipi0 |     2023 | 2000 |
	  
       Also, there was a slight change in my script where one
       argument's default value used to be 100, but changed to 1. When
       setting to 100 specifically, the difference went away.
      
   - Updating the =yield_and_efficiencies= file. 

     Tried to use Peter's backgrounds evt file and do the fit as shown
     in his script: ([[./src/10.1.5/python/peter/stupidcrossfeedplot.py][link]])
     
     :  /nfs/cor/user/ponyisi/hadD/summerconf/stupidcrossfeedplot.py

     But the fitting aborted, see the [[./log/2010/0406/cross.txt.1][log file]].

     
     

	  

** 2010-03-30
   :PROPERTIES:
   :CUSTOM_ID: 20100330
   :END:

   - Processed the 281/pb :

   [[./10.1/fig/mtg-20100330-1.png]]

   - Ran BF fitter : (with old =signal_line_shape_syst= and FSR study table).
     
     Original result: [[http://www.lepp.cornell.edu/~xs32/private/DHad/7.06/tables/data_results_pdg.html][table]]

     This result:  [[./10.1/tab/data_results_pdg.org][table]]

     
** 2010-03-23
   :PROPERTIES:
   :CUSTOM_ID: 20100323
   :END:
   
   [[./10.1/fig/mtg-20100323.png]]

   - Processed the 281/pb Data and MC with new momentum resolution
     parameters and the New DDalitz structure for Kspipi0
     
     1. Fit diagonal double tags floating momentum resolution parameters => [[./10.1/fig/signal_diagdouble_281ipbv5_resolution.org][figure]]

       - Momentum resolution parameters => [[./10.1/tab/para_momentum_resolution.org][table]]

	 The original parameters => [[./7.06/tables/double_line_shape_paras.html][table]]

	 Compare the new momentum resolution parameters with original => [[./10.1/tab/compare_para_momentum_resolution.org][table]]

     2. Fit signal MC =>  [[./10.1/fig/signal_single_281ipbv5.org][figure
]]
        - Compare the 281ipbv5 with the original - signal MC => [[./10.1/tab/compare_yields_signal_single_7.06_281ipb_281ipbv5.org][table]]
        - Compare the 281ipbv5 with the 281ipbv2 - signal MC => [[./10.1/tab/compare_yields_signal_single_281ipbv2_281ipbv5.org][table]]
	 
     3. Fit data =>   [[./10.1/fig/data_single_281ipbv5.org][figure]]
	- Compare the 281ipbv5 with the original - data => [[./10.1/tab/compare_yields_data_single_7.06_281ipb_281ipbv5.org][table]]
	- Compare the 281ipbv5 with the 281ipb (Dskimv2) - data => [[./10.1/tab/compare_yields_data_single_281ipb_281ipbv5.org][table]]
       
   - In progress : 537/pb Data and MC 
   - Todo: 
     - Get the 281/pb Branching Fractions with the original systematics
     - Get the 537/pb Branching Fractions with the systematics 



** 2010-03-16
   :PROPERTIES:
   :CUSTOM_ID: 20100316
   :END:

   - Process the Data and MC in new env 

     - New Lineshape parameters (Mass, Width, R)

     - DSkim version 2

       [[./10.1/fig/mtg-20100316.png]]

   - Question:

     1. What's the meaning of "FAILED" in the MINUIT process? Does that matters?

	A "FAILED" example [[http://www.lepp.cornell.edu/~xs32/private/DHad/10.1/log/281ipbv2/signal_Single_D0_to_Kpi__D0B_to_Kpi.txt][log file]]. Compared with a "CONVERGED"
        example [[http://www.lepp.cornell.edu/~xs32/private/DHad/10.1/log/281ipbv2/signal_Single_D0_to_Kpipi0__D0B_to_Kpipi0.txt][log file]]. - Not a big problem.

     2. For a meaningful comparison of the 281/pb results between the
        original and new environment, shall we use the same momentum
        resolution parameters (fa,sa,fb,sb ...) determined by fitting
        the diagonal double tag MC, or should we generate the double
        tag MC in the new environment and do a complete new process? - Yes.

     3. As Dskimv2 has looser cuts on \pi^0 and K_S, should we tighten
        them up to match the original Dskimv1 results? - Need to
        understand the process.







** 2010-03-09
   :PROPERTIES:
   :CUSTOM_ID: 20100309
   :END:

   - Process the 537/pb data in new environment (20080228\_FULL)
     It incluedes the new compiled =HadronicDNTupleProc= and RooFitModels

     - Compare the yields for data 537ipb between original and new  => [[./10.1/tab/compare_yields_data_single_7.06_537ipb_537ipb.org][table]]

       Message from Anders:
    
       : I see that there is a change in the D yields. I wanted to confirm
       : that there is also a change in the overall number of entries in
       : the plot you are fitting. (I would guess that this is the case as
       : very clean modes like Kpi seems to be almost as strongly affected
       : more 'dirty modes.)
       : 
       : If it is the case that you clearly have less entries in the histogram
       : I wonder if you have added code to protect against large events etc
       : and you are now throwing away some number of events.
       
      - Compare the input evtfile for mBC fit for data 537ipb between two releases 

           | Mode | New Events |
           |------+------------|
           |    0 |          0 |
           |    1 |        444 |
           |    3 |        591 |
           |  200 |         37 |
           |  201 |        836 |
           |  202 |         18 |
           |  203 |       2743 |
           |  204 |       6493 |
           |  205 |         19 |

	The new events indicates that the =HadronicDNtupleProc= code
        do have difference between two releases.

      - Noticed that the fitting was failed when using the new parameter to fit the original data. 

        |       | 7.06/537ipb | 537ipb     |
        |-------+-------------+------------|
        | Mass  | 3.7718 GeV  | 3.7724 GeV |
        | Width | 0.0286 GeV  | 0.0252 GeV |
        | R     | 12.3        | 12.7       |
 
	Use the same evtfile as input and do the fit using the original parameters:
	
	=> [[./10.1/tab/compare_yields_data_single_7.06_537ipb_537ipbv0.org][table]]

      - Question: which parameter shall we use? 











** 2010-02-02
   :PROPERTIES:
   :CUSTOM_ID: 20100202
   :END:

   - Turn off the dskim in the DNtuple process for signal MC - Label "537ipbv2"
     
     1. Compare the 537ipb (DSkim version 1) yield with 281ipb in signal MC => [[./10.1/tab/compare_yields_signal_divide_537ipb_9.03_regular12.org][table]]

     2. Compare the 537ipbv2 (DSkim version 2) yield with default 281ipb in signal MC => [[./10.1/tab/compare_yields_signal_divide_537ipbv2_9.03_regular12.org][table]]

     3. Compare the ratios of 537ipb/281ipb and 537ipbv2/281ipb in signal MC => [[./10.1/tab/compare_ratios_signal_537ipb_281ipb_537ipbv2_281ipb.org][table]] 

   - Run 281/pb data with eventstore 20070822 (DSkim v2)

     - Fixed the job aborting problem by commenting out the "missing mass calculation" 

   - Todo:
     - [ ] Process the data 281/pb and 537/pb
     - [ ] Process 281/pb MC in Dskim v2



** 2010-01-26
   :PROPERTIES:
   :CUSTOM_ID: 20100126
   :END:
   
   - Turn off the dskim in the DNtuple process for signal MC
     
     - Script:  [[./src/10.1.2/gen/dskim.tcl][dskim.tcl]] in DSkim release 20060224\_FULL\_A\_3

     - Error in [[./log/2010/0126/dtuple.txt][dtuple.txt]]: 

       : Suez.loadHadronicDNtupleProc> go
       :  %% INFO-JobControl.SourceManager: Using myChain for active streams: beginrun endrun event startrun 
       :  %% INFO-JobControl.SourceManager: Defined active streams.
       : ERROR: Suez caught a DAException:
       : "Starting from HadronicDNtupleProc we called extract for
       : [1] type "FATable<NavPi0ToGG>" usage "TagDPi0" production "" <== exception occured

   - Run 281/pb data with eventstore 20070822 (version 2 Dskim)

     - Debug NTuple code for "unknown daughter mode" when processing Data

       From [[./src/10.1.2/cleo/HadronicDNtupleProc/Class/HadronicDNtupleProc.cc][HadronicDNtupleProc.cc]]:

       :  int nDau = tagDecay.numberChildren();
       :  const STL_VECTOR(dchain::ReferenceHolder<CDCandidate>) & vect = tagDecay.children();
       :  assert(nDau <= 5);
       :  for (int dau = 0; dau < nDau; dau++) {
       :     const CDCandidate& cddau = *(vect[dau]);
       :     int index = -1;
       :     if (cddau.builtFromCDKs()) {
       :        index = indexInKsBlock(cddau.navKshort());
       :        assert(index >= 0);
       :     } else if (cddau.builtFromCDPi0()) {
       :        index = indexInPi0Block(cddau.navPi0());
       :        assert(index >= 0);
       :     } else if (cddau.builtFromTrack()) {
       :        index = indexInTrackBlock(cddau.track());
       :        assert(index >= 0);
       :     } else if (cddau.builtFromCDEta()) {
       :        index = indexInEtaBlock(cddau.navEta());
       :        assert(index >= 0);
       :        report( DEBUG, kFacilityString )
       : 	  << "While finding D daughters: Eta daughters trying!"
       : 	  << endl;
       :     } else {
       :        report( NOTICE, kFacilityString )
       : 	  << "While finding D daughters: unknown daughter mode"
       : 	  << endl;
       :     }

   - Todo:
     - [X] Turn off the dskim in the DNtuple process by removing the =ISTVAN_MC_FIX=
     - [ ] Debug NTuple code for "unknown daughter mode" - comment out the Ds modes
     - [ ] Investigate \pi^0 and K_S cuts
     - [ ] Understand the luminosity calculation







** 2010-01-21
   :PROPERTIES:
   :CUSTOM_ID: 20100121
   :END:

   - Last week:

     - Compare the 537ipb yield with 281ipb in signal MC => [[./10.1/tab/compare_yields_signal_divide_537ipb_9.03_regular12.org][table]]

   - Generate signal MC for 537ipb with new run numbers and process with DSkim after Pass2 - label: "537ipbv2"

     - Fitting "537ipbv2" => [[./10.1/fig/signal_single_537ipbv2.org][figure]]

     - Compare the 537ipbv2 yield with default 281ipb in signal MC => [[./10.1/tab/compare_yields_signal_divide_537ipbv2_9.03_regular12.org][table]]

     - Compare the ratios of 537ipb/281ipb and 537ipbv2/281ipb in signal MC => [[./10.1/tab/compare_ratios_signal_537ipb_281ipb_537ipbv2_281ipb.org][table]]

   - D mass comparison table for 281/pb data original and default => [[./10.1/tab/para_md_281ipb_7.06_regular3_d_7.06_regular_s_9.03_regular12_s.org][table]]

   - Run 281/pb data with eventstore 20070822 (DSkim v2)
     
     - Data 32 Aborted See log => [[./log/2010/0119/data32.txt][qjob]], [[./dat/data/10.1.2/dtuple-data32.txt][output]].

   - Todo:
     - [X] Turn off the dskim in the DNtuple process
     - [X] Fix the EBeam talbe in the "Grand Comparison Table" and send to DHad HN
     - [X] Restore the ISR plots to explain the lower D mass fitting value 
     - [ ] Debug NTuple code for "unknown daughter mode"
     - [X] Investigate \pi^0 and K_S cuts
     - [ ] Understand the luminosity calculation




** 2010-01-14
   :PROPERTIES:
   :CUSTOM_ID: 20100114
   :END:

  - Compare the EVT.PDL file
     - Common particles of the EVT.PDL files between 'Original' and 'Default' => [[./rel-9.03#table_diff_pdl_2005_2008_common][link]]
     - Common particles of the EVT.PDL files between 'Original' and 'Default' - selected to DHad => [[./rel-9.03#table_diff_pdl_2005_2008_common_selected][link]]
  - Discussion of the fitting plots of data, original, and default
  - Fitting 537ipb signal MC => [[./10.1/fig/signal_single_537ipb][plots]]
  - Compare the 537ipb yield with default 281ipb in signal MC =>  [[./10.1/tab/compare_yields_signal_divide_537ipb_9.03_regular12.org][table]]
  - Compare the ratios of 537ipb/281ipb in Data and MC => [[./10.1/tab/combine_compare_yields_data_signal_divide_537ipb.org][table]]

  - Todo:
    - [X] Make the D mass comparison table 
    - [X] Select runnumber based on luminosity
    - [X] Check DTag version for Data and MC




** 2010-01-07
   :PROPERTIES:
   :CUSTOM_ID: 20100107
   :END:

   - Update of the Grand comparison table => [[./rel-9.03#table_grand_comparison_table][link]]

   - Grand comparison table with new fitting code => [[./rel-9.03#table_grand_comparison_table_with_new_fitting_code][link]]

   - Compare the DECAY.DEC files between 'Original' (2005) and 'Default' (2008)

     - Changes in the common modes => [[./rel-9.03#table_diff_dec_dp2005_dp2008_common][link]]

     - Unique modes in 'Original' => [[./rel-9.03#table_diff_dec_dp2005_dp2008_1unique][link]]

     - Unique modes in 'Default' => [[./rel-9.03#table_diff_dec_dp2005_dp2008_2unique][link]]

   - Todo: Generate New MC sample 


* 2009 

** 2009-12-17
   :LOGBOOK:
   CLOCK: [2009-12-17 Thu 08:31]--[2009-12-17 Thu 08:32] =>  0:01
   CLOCK: [2009-12-16 Wed 21:40]--[2009-12-16 Wed 21:41] =>  0:01
   :END:
   :PROPERTIES:
   :CUSTOM_ID: 20091217
   :END:

   - Trace the source of the MC difference

     - Generate more (3X) events in mode D+ \to K0S pi+ pi+ pi- -> [[http://www.lepp.cornell.edu/~xs32/private/DHad/rel-9.03#sec-2.11][Link]]

       	Processing the =CLEOG&PDL&DEC= ...

   - Process new (537/pb) data sample

     - Fitting plots for 281/pb -> [[./rel-7.06#plots_data_regular3][Link]]

     - Fitting plots for 537/pb -> [[./rel-7.06#plots_data_537ipb][Link]]

     - Compare yields between 281/pb and 537/pb for data -> [[http://www.lepp.cornell.edu/~xs32/private/DHad/rel-7.06#sec-3.2][Link]]

     - Compare the fitting parameters -> [[http://www.lepp.cornell.edu/~xs32/private/DHad/rel-7.06#sec-3][Link]]


       	
       	

** COMMENT Time Table

   #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-12-10 Thu 10:00>" :tend "<2009-12-17 Thu 09:00>"
   Clock summary at [2009-12-16 Wed 21:40]
   
   | File         | L | Headline                                              | Time    |      |      |
   |--------------+---+-------------------------------------------------------+---------+------+------|
   |              |   | *Total time*                                          | *10:32* |      |      |
   |--------------+---+-------------------------------------------------------+---------+------+------|
   | rel-7.06.org |   | *File time*                                           | *4:08*  |      |      |
   | rel-7.06.org | 1 | Details                                               | 4:08    |      |      |
   | rel-7.06.org | 2 | Process 818 data (2.2) [88%]                          |         | 4:08 |      |
   | rel-7.06.org | 3 | DONE Extract Yields                                   |         |      | 0:04 |
   | rel-7.06.org | 3 | DONE Do the Fits                                      |         |      | 0:03 |
   | rel-7.06.org | 3 | WAITING Compare the yields                            |         |      | 1:16 |
   | rel-7.06.org | 3 | WAITING Compare the fitting parameters                |         |      | 2:45 |
   |--------------+---+-------------------------------------------------------+---------+------+------|
   | rel-9.03.org |   | *File time*                                           | *6:24*  |      |      |
   | rel-9.03.org | 1 | Details                                               | 6:24    |      |      |
   | rel-9.03.org | 2 | Generate more events for trouble modes (3.0.9)        |         | 5:18 |      |
   | rel-9.03.org | 3 | DONE Setup env                                        |         |      | 0:43 |
   | rel-9.03.org | 3 | DONE Generate and fit                                 |         |      | 0:25 |
   | rel-9.03.org | 3 | DONE Make comparison                                  |         |      | 4:10 |
   | rel-9.03.org | 2 | More events in old constants and old evt.pdl (3.0.10) |         | 1:06 |      |
   | rel-9.03.org | 3 | WAITING Setup env and generate                        |         |      | 1:06 |
   #+END: clocktable


 

  





** 2009-12-10
   :LOGBOOK:
   CLOCK: [2009-12-09 Wed 16:31]--[2009-12-09 Wed 16:34] =>  0:03
   :END:
   :PROPERTIES:
   :CUSTOM_ID: 20091210
   :END:

   - Trace the source of the MC difference

     - For the =EvtGenBase= package:

       "I don't think that any these changes would affect anything you are doing" -- Anders

     - For the =EvtGenModels= package:

       Possible relevant changes:(Full [[http://www.lepp.cornell.edu/~xs32/private/DHad/src/3.0.8/cleo/EvtGenModels/ChangeLog][ChangeLog]]):

       : 2006-01-10 16:35  ryd
       : 
       : 	* Class/EvtPHOTOS.cc: Addes constructor to EvtPHOTOS so we can
       : 	  controll what photons are called that are generated by PHOTOS.

       : 2006-01-11 15:58  ryd
       : 
       : 	* Class/EvtVPHOtoVISR.cc: Updated the lineshape code for the
       : 	  psi(3770)
       : 
       : 2006-01-15 22:20  ryd
       : 
       : 	* Class/: EvtKKLambdaCFF.cc, EvtModelReg.cc: Updated model
       : 	  registry.
       : 
       : 2006-01-25 14:14  ryd
       : 
       : 	* Class/: EvtModelReg.cc, EvtSLBKPole.cc, EvtSLBKPoleFF.cc: New
       : 	  model for 'BK' pole form factors
       : 
       : 2006-12-13 10:59  ponyisi
       : 
       : 	* Class/EvtModelReg.cc, Class/EvtVPHOtoVISRHi.cc,
       : 	  EvtGenModels/EvtVPHOtoVISRHi.hh: Add Brian Lang's code for vpho
       : 	  -> psi(xxxx) gamma ISR process
       : 2006-12-14 12:22  ponyisi
       : 
       : 	* Class/EvtVPHOtoVISRHi.cc: Revert VPHOtoVISRHi to MC-determined
       : 	  probMax
       : 
       : 2007-02-26 11:24  ponyisi
       : 
       : 	* Class/EvtDDalitz.cc: Flip sign of rho amplitude for D+ -> K0 pi+
       : 	  pi0
       : 2007-03-26 23:32  pcs
       : 
       : 	* Class/EvtISGW2.cc: setProbMax() for updated D and Ds semileptonic
       : 	  decays
       : 2007-04-02 23:28  ponyisi
       : 
       : 	* Class/EvtVPHOtoVISRHi.cc: Fix infrequent crash in certain decay
       : 	  modes
       : 
       : 2007-10-17 10:10  ponyisi
       : 
       : 	* Class/EvtVPHOtoVISRHi.cc: Assert if daughters in VPHOTOVISRHI are
       : 	  listed in an order that the code doesn't treat properly
       : 
       : 2007-10-18 22:50  ryd
       : 
       : 	* Class/EvtPHOTOS.cc: Store 4-vectors pre-Photos.
       : 
       : 2008-01-09 12:34  ponyisi
       : 
       : 	* Class/EvtDDalitz.cc: Add Qing He's implementation of Belle's D0
       : 	  -> anti-K0 pi+ pi- Dalitz model

       Recall one of the largest discrepancies is :

       : D+ to K0S pi+ pi+ pi-      
       
       Maybe in the Dalitz structure? ... No. 

       

   - Process full (818/pb) data sample
     
     Fitting [[http://www.lepp.cornell.edu/~xs32/private/DHad/rel-7.06#sec-2.4][plots]]

     Compare yields [[http://www.lepp.cornell.edu/~xs32/private/DHad/rel-7.06#sec-3.1][table]].


   - Todo:

     1. Generate more events in mode D+ => K0S pi+ pi+ pi- 

       	Also mode D- -> KKpi

     2. Generate double tag sample D+ => K0S pi+ pi+ pi- and D0 -> Kpi

       	Test whether the generic side has something to do with the three body decay.

     3. MC efficiencey table 

       	Proceed with the mechanics for producing the relevant sample
       	(3X more) and the comparison with 281/pb.

     4. Make NTuple for Generic MC in the new release

     5. Use square root scale plots

     6. Compare table with 537/pb data including errors
       	- Derive the error equations
       	- Show David the equations and the code












** COMMENT Time Table

   #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-12-03 Thu 10:00>" :tend "<2009-12-10 Thu 09:00>"
   Clock summary at [2009-12-09 Wed 16:31]
   
   | File         | L | Headline                                                                | Time    |      |      |
   |--------------+---+-------------------------------------------------------------------------+---------+------+------|
   |              |   | *Total time*                                                            | *10:53* |      |      |
   |--------------+---+-------------------------------------------------------------------------+---------+------+------|
   | rel-7.06.org |   | *File time*                                                             | *2:45*  |      |      |
   | rel-7.06.org | 1 | Details                                                                 | 2:45    |      |      |
   | rel-7.06.org | 2 | Process 818 data (2.2) [87%]                                            |         | 2:45 |      |
   | rel-7.06.org | 3 | DONE Do the Fits (Need to re-run for the duplicated data45)             |         |      | 0:01 |
   | rel-7.06.org | 3 | DONE Store the fitting plots (Need to re-run for the duplicated data45) |         |      | 0:41 |
   | rel-7.06.org | 3 | DONE Extract yields for 818 data                                        |         |      | 0:58 |
   | rel-7.06.org | 3 | WAITING Fitting for 818 data                                            |         |      | 0:13 |
   | rel-7.06.org | 3 | WAITING Compare the yields                                              |         |      | 0:52 |
   |--------------+---+-------------------------------------------------------------------------+---------+------+------|
   | rel-9.03.org |   | *File time*                                                             | *8:08*  |      |      |
   | rel-9.03.org | 1 | Details                                                                 | 8:08    |      |      |
   | rel-9.03.org | 2 | Compare the EvtGen code                                                 |         | 8:08 |      |
   | rel-9.03.org | 3 | Understand the EvtGenBase                                               |         |      | 8:08 |
   #+END: clocktable


 

  




** 2009-12-03
   :LOGBOOK:
   CLOCK: [2009-12-03 Thu 08:41]--[2009-12-03 Thu 09:00] =>  0:19
   :END:
   :PROPERTIES:
   :CUSTOM_ID: 20091203
   :END:
   

   - Trace the source of the MC difference

     - Processed using old CLEOG constants and Old evt.pdl => [[./rel-9.03#tab-compare_yields_signal_7.06_regular8][table]]

     - Updated the grand comparison table with unbined fit to 18 channels => [[./rel-9.03#tab-combine_compare_yields_signal_7dot06_regular_all][table]]

     - Documented the fitting plot page => [[./rel-9.03#sec-3.5][page]]

     - Trace the difference of EvtGenBase and EvtGenModels => [[./rel-9.03#sec-4.10.2][page]]

   - Process full data sample

     - Finished single tag fits

     - Updating the fitting plots page ...



** COMMENT Time Table

   #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-11-19 Thu 10:00>" :tend "<2009-12-03 Thu 09:00>"
   Clock summary at [2009-12-03 Thu 08:42]
   
   | File         | L | Headline                                                        | Time    |      |      |
   |--------------+---+-----------------------------------------------------------------+---------+------+------|
   |              |   | *Total time*                                                    | *21:38* |      |      |
   |--------------+---+-----------------------------------------------------------------+---------+------+------|
   | rel-7.06.org |   | *File time*                                                     | *1:34*  |      |      |
   | rel-7.06.org | 1 | Details                                                         | 1:34    |      |      |
   | rel-7.06.org | 2 | Process 818 data (2.2) [90%]                                    |         | 1:34 |      |
   | rel-7.06.org | 3 | DONE Extract Yields                                             |         |      | 0:34 |
   | rel-7.06.org | 3 | WAITING Do the Fits                                             |         |      | 0:32 |
   | rel-7.06.org | 3 | Store the fitting plots                                         |         |      | 0:28 |
   |--------------+---+-----------------------------------------------------------------+---------+------+------|
   | rel-9.03.org |   | *File time*                                                     | *20:04* |      |      |
   | rel-9.03.org | 1 | Plots                                                           | 8:03    |      |      |
   | rel-9.03.org | 2 | Difference of the yields between original and various new tests |         | 6:17 |      |
   | rel-9.03.org | 3 | Default                                                         |         |      | 4:50 |
   | rel-9.03.org | 3 | Pass2                                                           |         |      | 0:21 |
   | rel-9.03.org | 3 | 4Vec                                                            |         |      | 0:02 |
   | rel-9.03.org | 3 | DEC                                                             |         |      | 0:23 |
   | rel-9.03.org | 3 | CLEOG                                                           |         |      | 0:17 |
   | rel-9.03.org | 3 | PDL&DEC                                                         |         |      | 0:03 |
   | rel-9.03.org | 3 | CLEOG&PDL&DEC                                                   |         |      | 0:21 |
   | rel-9.03.org | 2 | Fitting                                                         |         | 1:46 |      |
   | rel-9.03.org | 3 | Default                                                         |         |      | 1:39 |
   | rel-9.03.org | 3 | Pass2                                                           |         |      | 0:02 |
   | rel-9.03.org | 1 | Details                                                         | 12:01   |      |      |
   | rel-9.03.org | 2 | Use old constants and old evt.pdl (3.0.8)                       |         | 8:26 |      |
   | rel-9.03.org | 3 | DONE Make the comparison table                                  |         |      | 8:26 |
   | rel-9.03.org | 2 | Compare the EvtGen code                                         |         | 3:35 |      |
   | rel-9.03.org | 3 | Looking for the code                                            |         |      | 1:00 |
   | rel-9.03.org | 3 | CVS diff for code EvtGenBase and EvtGenModels                   |         |      | 2:35 |
   #+END: clocktable


 

  



** 2009-11-19
   :LOGBOOK:
   CLOCK: [2009-11-18 Wed 16:54]--[2009-11-18 Wed 17:21] =>  0:27
   :END:
   :PROPERTIES:
   :CUSTOM_ID: 20091119
   :END:

  - Trace the source of the MC difference

    - Update the comparison table for using the old cleog constants =>[[./rel-9.03#tab-compare_yields_signal_7.06_regular3][link]].

    - Update the grand comparison table => [[./rel-9.03#tab-combine_compare_yields_signal_7dot06_regular_1_5][link]].

    - Processing Old CLEOG and Old evt.pdl 

  - Process full data sample
    - Finished processing the ntuple for the full data sample (skipped some trouble events)
    - Get the yields for just the new data ... in progress
    - Investigate the time consuming for the trouble events ... in progress

  - Todo: Add the 18 channels and do the fit





** COMMENT Time Table

   #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-11-12 Thu 10:00>" :tend "<2009-11-19 Thu 09:00>"
   Clock summary at [2009-11-18 Wed 16:55]
   
   | File         | L | Headline                                         | Time    |      |      |
   |--------------+---+--------------------------------------------------+---------+------+------|
   |              |   | *Total time*                                     | *11:31* |      |      |
   |--------------+---+--------------------------------------------------+---------+------+------|
   | rel-7.06.org |   | *File time*                                      | *7:35*  |      |      |
   | rel-7.06.org | 1 | Details                                          | 7:35    |      |      |
   | rel-7.06.org | 2 | Process 818 data (2.2) [89%]                     |         | 7:35 |      |
   | rel-7.06.org | 3 | WAITING Put Time Statement inside code           |         |      | 0:13 |
   | rel-7.06.org | 3 | DONE Process data44                              |         |      | 5:58 |
   | rel-7.06.org | 3 | DONE Process data46                              |         |      | 0:25 |
   | rel-7.06.org | 3 | DONE Re-process data43                           |         |      | 0:23 |
   | rel-7.06.org | 3 | DONE Re-process data45                           |         |      | 0:15 |
   | rel-7.06.org | 3 | WAITING Extract Yields                           |         |      | 0:21 |
   |--------------+---+--------------------------------------------------+---------+------+------|
   | rel-9.03.org |   | *File time*                                      | *3:56*  |      |      |
   | rel-9.03.org | 1 | Tables                                           | 0:19    |      |      |
   | rel-9.03.org | 2 | Old CLEOG constants - regular3                   |         | 0:05 |      |
   | rel-9.03.org | 3 | Compare yields signal 7.06 regular3              |         |      | 0:05 |
   | rel-9.03.org | 2 | Grand Comparison Table                           |         | 0:14 |      |
   | rel-9.03.org | 3 | Add chi-square to the table                      |         |      | 0:14 |
   | rel-9.03.org | 1 | Details                                          | 3:37    |      |      |
   | rel-9.03.org | 2 | Run on old constants CLEOG (3.0.3)               |         | 2:32 |      |
   | rel-9.03.org | 3 | DONE Use PostPass2                               |         |      | 2:32 |
   | rel-9.03.org | 2 | Use old constants and old evt.pdl (3.0.8) -[50%] |         | 1:05 |      |
   | rel-9.03.org | 3 | DONE Setup the old cleog constants env           |         |      | 0:36 |
   | rel-9.03.org | 3 | DONE Load the old evt.pdl                        |         |      | 0:11 |
   | rel-9.03.org | 3 | WAITING Generate MC samples                      |         |      | 0:18 |
   #+END: clocktable


 

  

  
** 2009-11-12
   :LOGBOOK:
   CLOCK: [2009-11-11 Wed 16:48]--[2009-11-11 Wed 17:20] =>  0:32
   :END:
   :PROPERTIES:
   :CUSTOM_ID: 20091112
   :END:


  - Trace the source of the MC difference
    
    - News about the CLEOC constants Beam Energy Shift

      [[http://www.lepp.cornell.edu/restricted/webtools/cleo3/source/Offline/doc/web/Constants/ConstantsFreeze_CLEO-c.html#447][Web link]]. 

      Todo: Need to use the the PostPass2 module in the new release ... in progress.

  - Process full data sample

    - Avoid the memeory leak in the code [[./src/2.2/cleo/HadronicDNtupleProc/Class/HadronicDNtupleProc.cc][HadronicDNtupleProc.cc]]
      
      : //  *missingMassObjects.loosePi0List = TurnPhdPi0sIntoNavPi0ToGGs(loosePi0table, showtable);

      Still wasting time on this event so far ...

      |    Run | Event | Time (old) |  New |
      |--------+-------+------------+------|
      | 221242 |  6470 |       1:30 | 1:30 |
      | 221705 | 29678 |       3:10 | 3:33 |

      Todo: run the code on the rest of the trouble events in data44 and data46
      






** COMMENT Time Table

   #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-11-05 Thu 10:00>" :tend "<2009-11-12 Thu 09:00>"
   Clock summary at [2009-11-11 Wed 17:20]
   
   | File         | L | Headline                                              | Time    |       |      |
   |--------------+---+-------------------------------------------------------+---------+-------+------|
   |              |   | *Total time*                                          | *20:02* |       |      |
   |--------------+---+-------------------------------------------------------+---------+-------+------|
   | rel-7.06.org |   | *File time*                                           | *2:48*  |       |      |
   | rel-7.06.org | 1 | Details                                               | 2:48    |       |      |
   | rel-7.06.org | 2 | Process 818 data (2.2) [78%]                          |         |  1:35 |      |
   | rel-7.06.org | 3 | WAITING Avoid the memeory leak for data43             |         |       | 0:41 |
   | rel-7.06.org | 3 | STARTED Process data44                                |         |       | 0:54 |
   | rel-7.06.org | 2 | Debug in the BeamEnergyProxy (2.4) [100%]             |         |  1:13 |      |
   | rel-7.06.org | 3 | DONE Check out the CesrBeamEnergyPord                 |         |       | 0:34 |
   | rel-7.06.org | 3 | DONE More precision in MCBeamParametersProxy          |         |       | 0:39 |
   |--------------+---+-------------------------------------------------------+---------+-------+------|
   | rel-9.03.org |   | *File time*                                           | *17:14* |       |      |
   | rel-9.03.org | 1 | Details                                               | 17:14   |       |      |
   | rel-9.03.org | 2 | Run on old constants CLEOG (3.0.3) - [80%]            |         | 17:14 |      |
   | rel-9.03.org | 3 | DONE Compare the beam energy from the BeamEnergyProxy |         |       | 0:18 |
   | rel-9.03.org | 3 | DONE Get the vpho energy for run 205456               |         |       | 0:48 |
   | rel-9.03.org | 3 | DONE More precision in MCBeamParametersProxy          |         |       | 1:53 |
   | rel-9.03.org | 3 | DONE Check other modes using the old cleog const      |         |       | 0:47 |
   | rel-9.03.org | 3 | DONE Clean test for the 3.0.3                         |         |       | 2:06 |
   | rel-9.03.org | 3 | DONE Compare the log file for 10 events               |         |       | 4:28 |
   | rel-9.03.org | 3 | STARTED Use PostPass2                                 |         |       | 6:54 |
   #+END: clocktable


 

  
  
** 2009-11-05
   :LOGBOOK:
   CLOCK: [2009-11-05 Thu 08:33]--[2009-11-05 Thu 09:56] =>  1:23
   :END:
   :PROPERTIES:
   :CUSTOM_ID: 20091105
   :END:
   
   + Progress and Issues
  
     - Trace the source of the MC difference

       - Add chi-square to the grand comparison table [[./rel-9.03#tab-combine_compare_yields_signal_7dot06_regular_1_5][link]]
       - Virtual photon energy

         |       | Original | New Release | Old CLEOG Const | Four-vector |
         |-------+----------+-------------+-----------------+-------------|
         | Mean  |  3.77330 |     3.77405 |         3.77405 |     3.77334 |
         | Sigma |  2.15515 |     2.18113 |         2.17982 |     2.15241 |

	 From this table, we can see that using the four-vector from the old
	 EvtGen dose reproduce the same energy as original

       - BeamEnergyProxy debug (working on it)


     - Data43 trouble events
       
       Skip events > 15 min...

       |    Run | Event | Time |
       |--------+-------+------|
       | 221242 |  6470 | 1:30 |
       | 221295 | 19061 | 1:00 |
       | 221493 | 61358 | 1:30 |
       | 221705 | 29678 | 3:10 |
       | 221715 | 65978 | 0:23 |
       | 221963 |  7013 | 0:17 |
       | 221988 | 23888 | 0:22 |
       | 222131 |  8240 | 1:00 |
       | 222279 | 65673 | 1:36 |
       | 222544 | 42858 | 0:38 |
       | 223051 | 28048 | 0:17 | 
       
       Job finished OK.

       : Job 1579825 (dtuple-data43.sh) Complete
       :  User             = xs32
       :  Queue            = all.q@lnx187.lns.cornell.edu
       :  Host             = lnx187.lns.cornell.edu
       :  Start Time       = 11/04/2009 09:55:51
       :  End Time         = 11/05/2009 05:48:58
       :  User Time        = 16:01:55
       :  System Time      = 00:15:03
       :  Wallclock Time   = 19:53:07
       :  CPU              = 16:16:58
       :  Max vmem         = 1.848G
       :  Exit Status      = 0    

       Output root files:
       
       : -rw-r--r--  1 xs32 cms 941M Nov  5 05:48 data43_dskim_evtstore_1.root
       : -rw-r--r--  1 xs32 cms 1.8G Nov  4 23:49 data43_dskim_evtstore.root

     - Similar trouble in data44 and data46 
   
       The possible solutions are :

       1. Break the job into two

       2. Skip the bad events (manual or with tools)

     
** COMMENT Time Table

   #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-10-29 Thu 10:00>" :tend "<2009-11-05 Thu 09:00>"
   Clock summary at [2009-11-05 Thu 08:33]
   
   | File         | L | Headline                                                 | Time   |      |      |
   |--------------+---+----------------------------------------------------------+--------+------+------|
   |              |   | *Total time*                                             | *8:50* |      |      |
   |--------------+---+----------------------------------------------------------+--------+------+------|
   | rel-7.06.org |   | *File time*                                              | *3:28* |      |      |
   | rel-7.06.org | 1 | Details                                                  | 3:28   |      |      |
   | rel-7.06.org | 2 | Process 818 data (2.2) [91%]                             |        | 1:51 |      |
   | rel-7.06.org | 3 | DONE Avoid missing mass calc                             |        |      | 0:37 |
   | rel-7.06.org | 3 | DONE Use Skip Bad Event                                  |        |      | 0:17 |
   | rel-7.06.org | 3 | DONE Proceed on the rest of the data43                   |        |      | 0:36 |
   | rel-7.06.org | 3 | WAITING Proceed on data44, 45, 46                        |        |      | 0:21 |
   | rel-7.06.org | 2 | Debug in the BeamEnergyProxy (2.4)                       |        | 1:37 |      |
   | rel-7.06.org | 3 | Setup 2.4                                                |        |      | 0:43 |
   | rel-7.06.org | 3 | Check out the CesrBeamEnergyPord                         |        |      | 0:54 |
   |--------------+---+----------------------------------------------------------+--------+------+------|
   | rel-9.03.org |   | *File time*                                              | *5:22* |      |      |
   | rel-9.03.org | 1 | Tables                                                   | 3:09   |      |      |
   | rel-9.03.org | 2 | Grand Comparison Table                                   |        | 3:09 |      |
   | rel-9.03.org | 3 | Add chi-square to the table                              |        |      | 3:09 |
   | rel-9.03.org | 1 | Details                                                  | 2:13   |      |      |
   | rel-9.03.org | 2 | Run on old constants CLEOG (3.0.3) - [62%]               |        | 2:13 |      |
   | rel-9.03.org | 3 | Restore regular3 files one mode                          |        |      | 0:05 |
   | rel-9.03.org | 3 | Plot the virtual photon                                  |        |      | 0:33 |
   | rel-9.03.org | 3 | STARTED Dig in to the MCBeamParametersProxy              |        |      | 1:10 |
   | rel-9.03.org | 3 | STARTED Compare the beam energy from the BeamEnergyProxy |        |      | 0:25 |
   #+END: clocktable



  

** 2009-10-29
   :PROPERTIES:
   :CUSTOM_ID: 20091029
   :END:
   
   + Progress and Issues
     
     - Trace the source of the MC difference

       - Check the EvtGen in the old release with DEBUG info


	 They use the same: DBBeamEnergyShift using version 1.11

       - Trace the BeamEnergyProd 
	 
	 Look up source code [[http://www.lepp.cornell.edu/restricted/webtools/cleo3/source/Offline/src/MCSymmetricBeamProd/Class/MCBeamParametersProxy.cc][MCBeamParametersProxy.cc]]: 

	 : 159    // -------------- beam energy and energy spread ----------------
	 : 160    // mean energy for each beam
	 : 161 
	 : 162    FAItem< BeamEnergy >                                iBeamEnergy;
	 : 163    extract( iRecord.frame().record(Stream::kStartRun), iBeamEnergy );
	 : 164 
	 : 165    const double beamEnergy ( iBeamEnergy->value() ) ;
	 
	 Message from Brian:

	 :   I think BeamEnergy comes from
	 : 
	 : https://www.lepp.cornell.edu/restricted/webtools/cleo3/source/Offline/src/CesrBeamEnergyProd/Class/BeamEnergyProxy.cc#155
	 : 
	 : This extracts CesrBeamEnergy from the startrun record
	 : 
	 : https://www.lepp.cornell.edu/restricted/webtools/cleo3/source/Offline/src/CesrBeamEnergyProd/Class/BeamEnergyProxy.cc#136
	 : 
	 : and then if the flag is selected, corrects it here:
	 : 
	 : https://www.lepp.cornell.edu/restricted/webtools/cleo3/source/Offline/src/CesrBeamEnergyProd/Class/BeamEnergyProxy.cc#142
	 : 
	 : 
	 : All this is in the producer CesrBeamEnergyProd.

	 :  The startrun record is more of a concept than a place. It comes after
	 : a begin run but before the first event, but doesn't have to be located
	 : in the event file (although it usually is). information "in" a record
	 : is not necessarily, well, "in" it.  There can be other sources of
	 : information in the startrun record, and in this case CesrBeamEnergy
	 : comes from RunStatistics, the constants db that is written online,
	 : which I am pretty sure is a different db than the one we generally use
	 : offline.  CerBeamEnergy is meant to be the value that CESR gave us
	 : based on their magnet settings.

	 

     - Data43 trouble events

       - Disable the missing mass calculation 

	 Commented out lines in [[./src/2.2/cleo/HadronicDNtupleProc/Class/HadronicDNtupleProc.cc][HadronicDNtupleProc.cc]]:

	 : //   CDPi0List pi0List;
	 : //   missingMassObjects.pi0List = new CDPi0List();
	 : //   *missingMassObjects.pi0List=pi0table;

	 Got "segmentation violation" error => [[./log/2009/1027/data43.txt][data43.txt]]


** COMMENT Time Table

   #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-10-22 Thu 10:00>" :tend "<2009-10-29 Thu 09:00>"
   Clock summary at [2009-10-29 Thu 08:42]
   
   | File         | L | Headline                                            | Time   |      |      |
   |--------------+---+-----------------------------------------------------+--------+------+------|
   |              |   | *Total time*                                        | *9:55* |      |      |
   |--------------+---+-----------------------------------------------------+--------+------+------|
   | rel-7.06.org |   | *File time*                                         | *1:23* |      |      |
   | rel-7.06.org | 1 | Details                                             | 1:23   |      |      |
   | rel-7.06.org | 2 | Process 818 data (2.2) [87%]                        |        | 1:23 |      |
   | rel-7.06.org | 3 | Avoid missing mass calc                             |        |      | 1:23 |
   |--------------+---+-----------------------------------------------------+--------+------+------|
   | rel-9.03.org |   | *File time*                                         | *8:32* |      |      |
   | rel-9.03.org | 1 | Details                                             | 8:32   |      |      |
   | rel-9.03.org | 2 | Run on old constants CLEOG (3.0.3) - [83%]          |        | 8:32 |      |
   | rel-9.03.org | 3 | Check the EvtGen in the old release with DEBUG info |        |      | 0:42 |
   | rel-9.03.org | 3 | WAITING Check BeamEnergy Code                       |        |      | 2:17 |
   | rel-9.03.org | 3 | Check the beam energy distribution of events        |        |      | 2:14 |
   | rel-9.03.org | 3 | Restore regular3 files one mode                     |        |      | 0:24 |
   | rel-9.03.org | 3 | Trace the Beam Energy process                       |        |      | 2:55 |
   #+END: clocktable



  

** 2009-10-22
   :PROPERTIES:
   :CUSTOM_ID: 20091022
   :END:

   + Progress and Issues
     
     - Trace the source of the MC difference
       	[[./9.03/fig/mtg-20091015.png]]
       	- Set DEBUG level in Suez (Suggestion from DLK)

	  Tested 10 events and compare the log file.  [[./log/2009/1021/cleog.txt][Old constant]] vs.  [[./log/2009/1021/cleog.txt.2][New constants]]
	  
	  : %% DEBUG-ConstantsPhase2Delivery.CP2SourceBinder: fdbName /nfs/cleo3/constants/db/Codi Tag PASS2-C_5
	  : %% DEBUG-ConstantsPhase2Delivery.CP2SourceBinder: fdbName /nfs/cleo3/constants/db/Codi Tag PASS2-C_6
	  
	  Looks they are different. But why the Beam Energy still does not change? 
	  
       	- Check the EvtGen Code? 

     - Investigate the trouble events in data43 
	 - Getting the Bad Event List

	   :    if ( tuple.run == 221242 &&  tuple.event == 4599 ||
	   : 	tuple.run == 221242 &&  tuple.event == 6470 ||
	   : 	tuple.run == 221295 &&  tuple.event == 19061 ||
	   : 	tuple.run == 221384 &&  tuple.event == 17807 ||
	   : 	tuple.run == 221413 &&  tuple.event == 54964 ||
	   : 	tuple.run == 221438 &&  tuple.event == 37151 ||
	   : 	tuple.run == 221477 &&  tuple.event == 57536 ||
	   : 	tuple.run == 221492 &&  tuple.event == 62595 ||
	   : 	tuple.run == 221493 &&  tuple.event == 47146 ||
	   : 	tuple.run == 221493 &&  tuple.event == 47852 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60003 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60017 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60067 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60096 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60102 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60198 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60221 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60282 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60301 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60465 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60479 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60628 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60649 ||
	   : 	tuple.run == 221493 &&  tuple.event == 60653 ||
	   : 	tuple.run == 221493 &&  ( tuple.event <= 60653 || tuple.event >= 75516) || 
	   : 
	   : 	tuple.run == 221311 &&  tuple.event == 22714 
	   : 	) {
	   :      report( NOTICE, kFacilityString ) << "Bypassing ... Run: " << tuple.run
	   : 				       << " Event: " << tuple.event << endl;
	   :   
	   :      return ActionBase::kFailed;
	   :    }

	   Trouble Run in 221493. Events make the job abort:

	   :  >> Tue Oct 20 16:04:05 2009 Run:  221493 Event:   60705 Stop: event << 
	   :  %% NOTICE-ConstantsPhase2Delivery.DBCP2Proxy: DBEIDPDFBinning using version 1.1
	   :  %% NOTICE-ConstantsPhase2Delivery.DBCP2Proxy: DBEIDPDFFunction using version 1.2
	   :  %% NOTICE-ConstantsPhase2Delivery.DBCP2Proxy: DBEIDWeightingFactor using version 1.1
	   :  %% INFO-C3ccProd.CcShowerAttributesProxy: Running with CC run-to-run corrections
	   :  %% INFO-C3ccProd.CcShowerAttributesProxy: Running with CC hot list suppression available
	   :  %% INFO-CCGECS: CC Energy-dependent calibration version of Jan 2004
	   
	   Need to use the SkipBadEvent package to avoid compiling every time. 

	   


   + Plans

     - CLEOG constants

       - Check the EvtGen in the old release with DEBUG info

       - Trace the MCProxyBeamEnergyProd on how to produce

     - Data43 trouble events

       - Disable the missing mass calculation 

       - Use SkipBadEvent package (if there are still bad events)


** COMMENT Time Table

    #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-10-16 Fri 08:00>" :tend "<2009-10-21 Wed 16:00>"
    Clock summary at [2009-10-22 Thu 08:23]
    
    | File         | L | Headline                                            | Time    |      |      |
    |--------------+---+-----------------------------------------------------+---------+------+------|
    |              |   | *Total time*                                        | *10:41* |      |      |
    |--------------+---+-----------------------------------------------------+---------+------+------|
    | rel-7.06.org |   | *File time*                                         | *9:06*  |      |      |
    | rel-7.06.org | 1 | Details                                             | 9:06    |      |      |
    | rel-7.06.org | 2 | Process 818 data (2.2) [87%]                        |         | 9:06 |      |
    | rel-7.06.org | 3 | STARTED Inplement code to bypass the trouble events |         |      | 9:06 |
    |--------------+---+-----------------------------------------------------+---------+------+------|
    | rel-9.03.org |   | *File time*                                         | *1:35*  |      |      |
    | rel-9.03.org | 1 | Details                                             | 1:35    |      |      |
    | rel-9.03.org | 2 | Run on old constants CLEOG (3.0.3) - [90%]          |         | 1:35 |      |
    | rel-9.03.org | 3 | DONE Ask question on CLEOG HN                       |         |      | 0:04 |
    | rel-9.03.org | 3 | Set DEBUG at Suez                                   |         |      | 1:31 |
    #+END: clocktable




** 2009-10-15
  :LOGBOOK:
  CLOCK: [2009-10-14 Wed 20:59]--[2009-10-14 Wed 21:24] =>  0:25
  CLOCK: [2009-10-14 Wed 20:00]--[2009-10-14 Wed 20:53] =>  0:53
  :END:
  :PROPERTIES:
  :CUSTOM_ID: 20091015
  :END:

 + Progress and Issues
  
  - Trace the source of the MC difference
    [[./9.03/fig/mtg-20091015.png]]

    - CLEOG constants still using the old version

      Posting on HyperNews => [[https://hypernews.lepp.cornell.edu/HyperNews/get/CLEOGSimulation/14.html][link]]
      
      Are there any other way to test the old constants in addition to the cleog log file? 

##+begin_ditaa ./9.03/fig/mtg-20091015.png -s 0.8
#: 
#:    +------------+  +-----------+         +---------+    +---------+
#:    |  Generic   |  |   User    |         |         |    |         |   
#:    | Decay File |  | Decay File|         |  Const  |    | Const   |
#:    | cGRE {io}  |  | {io} cGRE |         |{io}cYEL |    |{io}cGRE |
#:    +--+---------+  +-----+-----+         +----+----+    +----+----+
#:       |                  |                    |              |     
#:       |     +------------+                    |              |     
#:       |     |                                 |              |     
#:       v     v                                 v              v      
#:     +------------+    +------------+    +---------+    +---------+    +---------+   +------------+
#:     |            |    |            |    |         |    |         |    |         |   |            |
#:     |   EvtGen   +--->+  DCTree    +--->+  CLEOG  +--->+  PASS2  +--->+ DNTUPLE +-->+ ANA + Fit  |
#:     |   cYEL     |    |   {io}cGRE |    |   cGRE  |    |  cGRE   |    | cGRE    |   | cGRE       |
#:     +------------+    +------------+    +---------+    +---------+    +---------+   +------------+
#:           ^
#:           |
#:    +------+-----+  
#:    |            |     
#:    |  evt.pdl   |  
#:    | cGRE {io}  |  
#:    +------------+  
#: 
##+end_ditaa
    - Any Change in the EvtGen code? 
  
  - Investigate the trouble events in data43

    - Event Display for Run: 221242 Event: 4599 

      (Dan helped me to stage the raw info of this run from the Tape.)

      [[./log/2009/1013/evt_4599.png]]

      In the log file:
      :  >> Tue Oct 13 10:46:43 2009 Run:  221242 Event:    4599 Stop: event << 
      : %% NOTICE-Processor.HadronicDNtupleProc: Hard limit on number of DD candidates exceeded

    - Modify code to bypass this event
      In [[./src/2.2/cleo/HadronicDNTupleProc/Class/HadronicDNtupleProc.cc][HadronicDNtupleProc.cc]]:

      :   if( tuple.nddcand >= MAXNDDCAND )
      :   {
      :      report( NOTICE, kFacilityString ) 
      : 	<< "Hard limit on number of DD candidates exceeded" << endl;
      :      return ActionBase::kFailed; // added by xs32
      :   }
      
      Only reduced CPU time for 7 minutes.

     | Test   | Job start            | Job end              | Duration |
     |--------+----------------------+----------------------+----------|
     | First  | Oct 13 10:46:43 2009 | Oct 13 11:10:34 2009 | 23' 51"  |
     | Second | Oct 14 08:12:04 2009 | Oct 14 08:28:43 2009 | 16' 39"  |

       - What is the right way to bypass? 

	 /Comment from Jim and David/: The duration is actually the
         time spend on that event before reaching the maximum DD
         candidate limit. So, it is not a measure of the effectiveness
         of this method.  Try to skip these events if they are not too
         many.
       

 + Plan

   - CLEOG constants
     - Ask Steve Blusk 
     - Contact DLK after next Tuesday

   - Data43 trouble events
     - Use "Bad Event List" in the code

** COMMENT Time Table   
    #+BEGIN: clocktable  :scope ("rel-7.06.org" "rel-9.03.org") :tstart "<2009-10-09 Fri 08:00>" :tend "<2009-10-14 Wed 16:00>"
    Clock summary at [2009-10-14 Wed 20:40]
    
    | File         | L | Headline                                            | Time   |      |      |
    |--------------+---+-----------------------------------------------------+--------+------+------|
    |              |   | *Total time*                                        | *6:22* |      |      |
    |--------------+---+-----------------------------------------------------+--------+------+------|
    | rel-7.06.org |   | *File time*                                         | *4:22* |      |      |
    | rel-7.06.org | 1 | Details                                             | 4:22   |      |      |
    | rel-7.06.org | 2 | Process 818 data (2.2) [87%]                        |        | 4:22 |      |
    | rel-7.06.org | 3 | DONE Event Display the trouble event                |        |      | 1:49 |
    | rel-7.06.org | 3 | STARTED Inplement code to bypass the trouble events |        |      | 2:33 |
    |--------------+---+-----------------------------------------------------+--------+------+------|
    | rel-9.03.org |   | *File time*                                         | *2:00* |      |      |
    | rel-9.03.org | 1 | Details                                             | 2:00   |      |      |
    | rel-9.03.org | 2 | Run on old constants CLEOG (3.0.3) - [81%]          |        | 2:00 |      |
    | rel-9.03.org | 3 | STARTED Track the Constants                         |        |      | 2:00 |
    #+END: clocktable


* COMMENT Setup
#+LINK_HOME: http://www.lepp.cornell.edu/~xs32/
#+LINK_UP: ./
#+STYLE: <link rel="stylesheet" type="text/css" href="web/main.css" />
#+STYLE: <link rel="shortcut icon" href="web/cleo.ico"/>
#+INFOJS_OPT: view:info path:web/org-info.js tdepth:1 ftoc:t 
#+OPTIONS: author:nil creator:nil num:nil toc:nil todo:nil H:4 
#+SEQ_TODO: TODO STARTED WAITING | DONE CANCELED
#+PROPERTY: Effort_ALL 0:15 0:30 1:00 1:30 2:00 2:30 3:00 4:00 5:00 6:00 7:00 8:00
#+COLUMNS: %40ITEM(Task) %5Effort(Estimated Effort){:} %CLOCKSUM

